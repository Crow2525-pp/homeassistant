# Configure a default setup of Home Assistant (frontend, api, etc)
default_config:

# Text to speech
tts:
  - platform: google_translate

sensor: !include mysensors.yaml
group: !include groups.yaml
automation: !include automations.yaml
script: !include scripts.yaml
scene: !include scenes.yaml
frontend:
  themes: !include_dir_merge_named themes
  javascript_version: latest

http:
  use_x_forwarded_for: true
  trusted_proxies:
    - 192.168.1.103
    - 192.168.1.90
    - 192.168.1.14
    - 192.168.1.16
    - 192.168.1.98
    - 172.30.33.0/24
    - 127.0.0.1

smartir:

media_player:
- platform: universal
  name: Sony Bravia
  unique_id: sony_bravia
  children:
    - media_player.living_room_tv
    - media_player.sony_kd_55x8500c
  active_child_template: >
    {% if not is_state("media_player.sony_kd_55x8500c", 'off') and not is_state("media_player.living_room_tv", "off") and is_state_attr('media_player.sony_kd_55x8500c', 'media_title', "Smart TV") and not is_state_attr('media_player.living_room_tv', 'app_name', "Netflix") %}
      media_player.living_room_tv
    {% else %}
      media_player.sony_kd_55x8500c
    {% endif %}
  browse_media_entity: media_player.sony_kd_55x8500c
  commands:
    turn_on:
      service: media_player.turn_on
      target:
        entity_id: media_player.sony_kd_55x8500c
    turn_off:
      service: media_player.turn_off
      target:
        entity_id: media_player.sony_kd_55x8500c
    volume_up:
      service: media_player.volume_up
      target:
        entity_id: media_player.sony_kd_55x8500c
    volume_down:
      service: media_player.volume_down
      target:
        entity_id: media_player.sony_kd_55x8500c
    volume_set:
      service: media_player.volume_set
      target:
        entity_id: media_player.sony_kd_55x8500c
      data:
        volume_level: "{{ volume_level }}"
    volume_mute:
      service: media_player.volume_mute
      target:
        entity_id: media_player.sony_kd_55x8500c
    select_source:
      service: media_player.select_source
      target:
        entity_id: media_player.sony_kd_55x8500c
      data:
        source: "{{ source }}"

  attributes:
    is_volume_muted: media_player.sony_kd_55x8500c|is_volume_muted
    volume_level: media_player.sony_kd_55x8500c|volume_level
    source_list: media_player.sony_kd_55x8500c|source_list

climate:
  - platform: smartir
    name: Masterbed AC
    unique_id: Masterbed_AC
    device_code: 1123
    controller_data: remote.ir_blaster_master_bedroom_remote
    temperature_sensor: sensor.ble_temperature_masterbed_temp_humidity_sensor
    humidity_sensor: sensor.ble_humidity_masterbed_temp_humidity_sensor
  - platform: smartir
    name: Otto's AC
    unique_id: Otto_AC
    device_code: 1123
    controller_data: remote.otto_s_room_remote_control_remote
    temperature_sensor: sensor.study_esp32_ottosroom_temperature
    humidity_sensor: sensor.study_esp32_ottosroom_humidity
  - platform: smartir
    name: Study AC
    unique_id: Henry AC
    device_code: 1123
    controller_data: remote.henrys_room_ir_blaster_remote
    temperature_sensor: sensor.study_esp32_henrysroom_temperature
    humidity_sensor: sensor.study_esp32_henrysroom_humidity
  - platform: smartir
    name: Living Room AC
    unique_id: Living Room AC
    device_code: 1022
    controller_data: remote.livingroom_irblaster_remote
    temperature_sensor: sensor.livingroom_irblaster_temperature
    humidity_sensor: sensor.livingroom_irblaster_humidity
fan:
  - platform: smartir
    name: MasterBedroom fan
    unique_id: bedroom_fan
    device_code: 1040
    controller_data: remote.ir_blaster_master_bedroom_remote

#Roller Blinds
cover:
  - platform: template
    covers:
      roller_blinds_chan1:
        device_class: blind
        friendly_name: "Roller blinds (MasterBedroom)"
        unique_id: "roller_blinds_MasterBedroom"
        position_template: "50"
        open_cover:
          service: script.roller_blinds_up
        close_cover:
          service: script.roller_blinds_down
        stop_cover:
          service: script.roller_blinds_stop

light:
  - platform: template
    lights:
      tv_backlight:
        friendly_name: "TV Back Lightstrip"
        icon_template: "mdi:television-ambient-light"
        turn_on:
          service: script.tv_lights_on
        turn_off:
          service: script.tv_lights_off
