type: custom:auto-entities
card:
  type: entities
  title: Braybrook Weather Warnings
  show_header_toggle: false
filter:
  template: >
    {% set warnings = state_attr('sensor.braybrook_warnings', 'warnings') %}
    {% if warnings %}
      [
      {% for w in warnings %}
        {
          "entity": "sensor.braybrook_warnings",
          "type": "custom:template-entity-row",
          "icon": "mdi:alert",
          "name": "{{ w.title }}", #{{ w.short_title }} -
          "class": "{{ 'major' if w.warning_group_type == 'major' else 'minor' }}",
          "state": "{{ w.phase | capitalize }}",
          "secondary": "Iss: {{ w.issue_time }} | Exp: {{ w.expiry_time }}"
            }
        {% if not loop.last %},{% endif %}
      {% endfor %}
      ]
    {% else %}
      [
        {
          "entity": "sensor.braybrook_warnings",
          "icon": "mdi:check-circle-outline",
          "name": "No active warnings",
          "state": "Safe"
        }
      ]
    {% endif %}
card_mod:
  style: |
    ha-card {
      border-radius: 12px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      transition: all 0.3s ease;
    }
    ha-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
    }
