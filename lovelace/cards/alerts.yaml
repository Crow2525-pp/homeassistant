type: vertical-stack
cards:
  - type: conditional
    conditions:
      - condition: or
        conditions:
          - condition: state
            entity: input_boolean.washing_machine_on
            state: 'on'
          - condition: state
            entity: input_boolean.dryer_on
            state: 'on'
          - condition: state
            entity: input_boolean.dishwasher_on
            state: 'on'
    card:
      type: vertical-stack
      cards:
        - type: markdown
          content: |
            **Currently Running:**
            {% if is_state('input_boolean.washing_machine_on', 'on') %}
            • Washer ({{ states('sensor.washing_machine_estimated_remaining') }} min remaining)
            {% endif %}
            {% if is_state('input_boolean.dryer_on', 'on') %}
            • Dryer ({{ states('sensor.dryer_estimated_remaining') }} min remaining)
            {% endif %}
            {% if is_state('input_boolean.dishwasher_on', 'on') %}
            • Dishwasher
            {% endif %}
          card_mod:
            style: |
              ha-card {
                background: linear-gradient(135deg, rgba(15, 118, 110, 0.1) 0%, rgba(15, 118, 110, 0.05) 100%);
                border-left: 4px solid #0F766E;
                padding: 12px 16px;
                border-radius: 12px 12px 0 0;
                box-shadow: none;
                color: white;
              }
              ha-card p {
                color: white;
              }

      card_mod:
        style: |
          ha-card {
            background: linear-gradient(135deg, rgba(15, 118, 110, 0.1) 0%, rgba(15, 118, 110, 0.05) 100%);
            border-left: 4px solid #0F766E;
            padding: 12px 16px;
            border-radius: 12px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            color: white;
          }
          ha-card p {
            color: white;
          }

  - type: conditional
    conditions:
      - condition: state
        entity: cover.smart_garage_door_garage
        state: 'open'
    card:
      type: vertical-stack
      cards:
        - type: button
          name: Close Garage Door
          icon: mdi:garage-alert
          show_name: true
          show_icon: true
          icon_height: 48px
          tap_action:
            action: call-service
            service: cover.close_cover
            target:
              entity_id: cover.smart_garage_door_garage
          card_mod:
            style: |
              ha-card {
                background: linear-gradient(145deg, #E11D48 0%, #BE123C 100%);
                color: white;
                border-radius: 16px 16px 0 0;
                box-shadow: 0 8px 16px rgba(225, 29, 72, 0.4);
                padding: 20px;
                min-height: 110px;
                border: none;
                transition: all 0.3s ease;
              }
              ha-card:hover {
                transform: translateY(-2px);
                box-shadow: 0 12px 24px rgba(225, 29, 72, 0.5);
              }
              ha-icon {
                color: white;
                --mdc-icon-size: 52px;
                filter: drop-shadow(0 2px 4px rgba(0, 0, 0,0.2));
              }
              .name {
                font-weight: 600;
                font-size: 19px;
                margin-top: 10px;
                letter-spacing: 0.3px;
              }
        - type: markdown
          content: "Garage door is currently **OPEN**  \nTap to close immediately"
          card_mod:
            style: |
              ha-card {
                background: linear-gradient(145deg, rgba(51, 65, 85, 0.95), rgba(51, 65, 85, 0.95));
                backdrop-filter: blur(10px);
                border-radius: 0 0 16px 16px;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
                padding: 14px;
                font-size: 13px;
                line-height: 1.6;
                margin-top: -6px;
                border-top: 2px solid rgba(225, 29, 72, 0.3);
                color: white;
              }
              ha-card p {
                margin: 4px 0;
                color: white;
              }
        - type: grid
          columns: 2
          square: false
          cards:
            - !include alarm/front_door_camera.yaml
            - !include alarm/driveway_camera.yaml

  - type: conditional
    conditions:
      - condition: state
        entity: input_boolean.ottos_door_open
        state: "on"
    card:
      type: button
      entity: input_boolean.ottos_door_open
      name: "Otto's Door"
      show_name: true
      show_icon: true
      show_state: true
      tap_action:
        action: toggle
      theme: waves
      icon_height: "60px"
      card_mod:
        style: |
          ha-card {
            background: linear-gradient(145deg, #D97706 0%, #B45309 100%); /* Yellow - Google Material Design */
            color: white !important;
            border-radius: 12px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            padding: 16px;

            /* Force icon color variables to white */
            --mdc-icon-color: white !important;
            --paper-item-icon-color: white !important;
          }
          ha-icon {
            color: white !important; /* Direct override for the icon */
          }
          .state {
            font-weight: bold;
            margin-top: 8px;
            color: white !important;
          }

  - type: alarm-panel
    entity: alarm_control_panel.alarmo
    name: "Alarm Active!"
    theme: waves
    visibility:
      - condition: state
        entity: alarm_control_panel.alarmo
        state: "triggered"
    card_mod:
      style: |
        ha-card {
          background: linear-gradient(145deg, #E11D48 0%, #BE123C 100%); /* Red - Google Material Design */
          color: white; /* Use white text for better contrast */
          padding: 16px; /* Add padding inside the card */
          border-radius: 10px; /* Round the corners of the card */
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Add a shadow for a 3D effect */
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
        }
        ha-card h1 {
          color: white; /* Ensure header text is also white */
        }
        .disarm {
          background-color: rgba(255, 255, 255, 0.1);
          color: white;
          border: 2px solid white;
          border-radius: 5px;
          padding: 10px 20px;
          text-align: center;
          margin-top: 10px;
          cursor: pointer;
        }
        .disarm:hover {
          background-color: rgba(255, 255, 255, 0.2);
        }

  - type: conditional
    conditions:
      - condition: state
        entity: alert.network_device_down_warn_alert_active
        state: "on"
    card:
      type: entities
      title: "Network Issues"
      entities:
        - entity: binary_sensor.wan_down_alert_active
          icon: mdi:wan
          secondary_info: last-changed
        - entity: binary_sensor.network_device_down_alert_active
          icon: mdi:access-point-network
          secondary_info: last-changed
      state_color: false
      card_mod:
        style: |
          ha-card {
            background: linear-gradient(145deg, #D97706 0%, #B45309 100%); /* Yellow - Google Material Design */
          }

  - type: conditional
    conditions:
      - condition: state
        entity: alert.wan_down_warn_alert_active
        state: "on"
    card:
      type: entities
      title: "Network Issues"
      entities:
        - entity: binary_sensor.wan_down_alert_active
          icon: mdi:wan
          secondary_info: last-changed
        - entity: binary_sensor.network_device_down_alert_active
          icon: mdi:access-point-network
          secondary_info: last-changed
      state_color: false
      card_mod:
        style: |
          ha-card {
            background: linear-gradient(145deg, #D97706 0%, #B45309 100%); /* Yellow - Google Material Design */
          }
