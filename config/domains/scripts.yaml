roller_blinds_up:
  alias: Roller Blinds Up
  sequence:
  - service: remote.send_command
    data:
      device: Roller Blinds
      command: Up
    target:
      device_id: 3d7542325305f19a1d70e5b14947b2a9
  mode: single
  icon: mdi:blinds-open
roller_blinds_down:
  alias: Roller Blinds Down
  sequence:
  - service: remote.send_command
    data:
      device: Roller Blinds
      command: Down
    target:
      device_id: 3d7542325305f19a1d70e5b14947b2a9
  mode: single
  icon: mdi:blinds
roller_blinds_stop:
  alias: Roller Blinds Stop
  sequence:
  - service: remote.send_command
    data:
      device: Roller Blinds
      command: Stop
    target:
      device_id: 3d7542325305f19a1d70e5b14947b2a9
  mode: single
  icon: mdi:blinds

# Simplified 3-state roller blind control
roller_blinds_open_simple:
  alias: Roller Blinds Open (Simple)
  sequence:
    # Send IR open command
    - service: remote.send_command
      data:
        device: Roller Blinds
        command: Up
      target:
        device_id: 3d7542325305f19a1d70e5b14947b2a9

    # Update state based on current position
    - choose:
        # From CLOSED -> PARTIAL (stop after 5 seconds)
        - conditions:
            - condition: state
              entity_id: input_select.roller_blind_state_simple
              state: 'closed'
          sequence:
            - delay:
                seconds: 5
            - service: script.roller_blinds_stop
            - service: input_select.select_option
              target:
                entity_id: input_select.roller_blind_state_simple
              data:
                option: 'partial'

        # From PARTIAL -> OPEN (let it run full 18 minutes)
        - conditions:
            - condition: state
              entity_id: input_select.roller_blind_state_simple
              state: 'partial'
          sequence:
            - delay:
                seconds: 1080  # 18 minutes
            - service: input_select.select_option
              target:
                entity_id: input_select.roller_blind_state_simple
              data:
                option: 'open'

      # Already OPEN -> Do nothing
      default: []
  mode: restart
  icon: mdi:blinds-open

roller_blinds_close_simple:
  alias: Roller Blinds Close (Simple)
  sequence:
    # Send IR close command
    - service: remote.send_command
      data:
        device: Roller Blinds
        command: Down
      target:
        device_id: 3d7542325305f19a1d70e5b14947b2a9

    # Update state based on current position
    - choose:
        # From OPEN -> PARTIAL (stop after 5 seconds)
        - conditions:
            - condition: state
              entity_id: input_select.roller_blind_state_simple
              state: 'open'
          sequence:
            - delay:
                seconds: 5
            - service: script.roller_blinds_stop
            - service: input_select.select_option
              target:
                entity_id: input_select.roller_blind_state_simple
              data:
                option: 'partial'

        # From PARTIAL -> CLOSED (let it run full 18 minutes)
        - conditions:
            - condition: state
              entity_id: input_select.roller_blind_state_simple
              state: 'partial'
          sequence:
            - delay:
                seconds: 1080  # 18 minutes
            - service: input_select.select_option
              target:
                entity_id: input_select.roller_blind_state_simple
              data:
                option: 'closed'

      # Already CLOSED -> Do nothing
      default: []
  mode: restart
  icon: mdi:blinds-closed

roller_blinds_set_position_simple:
  alias: Roller Blinds Set Position (Simple)
  fields:
    position:
      description: Target position (0=closed, 50=partial, 100=open)
      example: 50
  sequence:
    - choose:
        # Position 0-20 = CLOSED
        - conditions:
            - condition: template
              value_template: "{{ position <= 20 }}"
          sequence:
            - service: script.roller_blinds_close_simple

        # Position 21-79 = PARTIAL
        - conditions:
            - condition: template
              value_template: "{{ position > 20 and position < 80 }}"
          sequence:
            # Determine if we need to open or close to get to partial
            - choose:
                # Currently CLOSED -> Open to partial
                - conditions:
                    - condition: state
                      entity_id: input_select.roller_blind_state_simple
                      state: 'closed'
                  sequence:
                    - service: script.roller_blinds_open_simple

                # Currently OPEN -> Close to partial
                - conditions:
                    - condition: state
                      entity_id: input_select.roller_blind_state_simple
                      state: 'open'
                  sequence:
                    - service: script.roller_blinds_close_simple

              # Already PARTIAL -> Do nothing
              default: []

        # Position 80-100 = OPEN
        - conditions:
            - condition: template
              value_template: "{{ position >= 80 }}"
          sequence:
            - service: script.roller_blinds_open_simple
            # If currently CLOSED, need to open twice
            - condition: state
              entity_id: input_select.roller_blind_state_simple
              state: 'closed'
            - delay:
                seconds: 6
            - service: script.roller_blinds_open_simple
  mode: restart
  icon: mdi:blinds

spotify_music_tv:
  alias: Spotify_channel
  sequence:
  - action: remote.turn_on
    target:
      entity_id: remote.sony_bravia_tv
  - target:
      entity_id: scene.new_scene
    metadata: {}
    action: scene.turn_on
  mode: single
tv_lights_on:
  alias: Tv lights on
  sequence:
  - service: remote.send_command
    data:
      device: Tv_light
      command: turnon
    target:
      entity_id: remote.livingroom_irblaster_remote
  mode: single
  icon: mdi:led-strip-variant
tv_lights_off:
  alias: Tv lights off
  sequence:
  - service: remote.send_command
    data:
      device: Tv_light
      command: turnoff
    target:
      entity_id: remote.livingroom_irblaster_remote
  mode: single
  icon: mdi:led-strip-variant-off
tvlightbrightdown:
  alias: TVlightbrightdown
  sequence:
  - service: remote.send_command
    data:
      device: Tv_light
      command: bright-down
      num_repeats: 15
    target:
      entity_id: remote.livingroom_irblaster_remote
  mode: single
  icon: mdi:brightness-5
tvbrightup:
  alias: Tvbrightup
  sequence:
  - service: remote.send_command
    data:
      device: Tv_light
      command: bright-up
      num_repeats: 15
    target:
      entity_id: remote.livingroom_irblaster_remote
  mode: single
  icon: mdi:brightness-4
garage_door_toggle:
  alias: Garage door toggle
  sequence:
  - action: cover.toggle
    metadata: {}
    data: {}
    target:
      device_id: 7edad8ef01a718694f8a423cbfdca0c0
  mode: single
  icon: mdi:garage
fan_speed_3:
  alias: Fan - Speed 3
  sequence:
  - service: remote.send_command
    data:
      device: Ceiling Fan
      command: 3
    target:
      device_id: 3d7542325305f19a1d70e5b14947b2a9
  mode: single
  icon: mdi:air-conditioner
fan_speed_1:
  alias: Fan - Speed 1
  sequence:
  - service: remote.send_command
    data:
      device: Ceiling Fan
      command: 1
    target:
      device_id: 3d7542325305f19a1d70e5b14947b2a9
  mode: single
  icon: mdi:air-conditioner
fan_speed_6:
  alias: Fan - Speed 6
  sequence:
  - service: remote.send_command
    data:
      device: Ceiling Fan
      command: 6
    target:
      device_id: 3d7542325305f19a1d70e5b14947b2a9
  mode: single
  icon: mdi:air-conditioner
fan_off:
  alias: Fan - Off
  sequence:
  - service: remote.send_command
    data:
      device: Ceiling Fan
      command: On/Off
    target:
      device_id: 3d7542325305f19a1d70e5b14947b2a9
  mode: single
  icon: mdi:air-conditioner
led_off_henry:
  alias: LED Off - Henry
  sequence:
  - service: remote.send_command
    data:
      num_repeats: 1
      delay_secs: 0.4
      hold_secs: 0
      device: Airconditioner
      command: LED-OFF
    target:
      entity_id: remote.henrys_room_ir_blaster_remote
  mode: single
'1686171686731':
  alias: Master Slow On
  sequence:
  - service: light.turn_on
    data:
      brightness: 1
    target:
      device_id:
      - 18551c9b3c72efc901c3e35633c1e3c7
      - 3cf9c8bc5367cd26edc9b128e7303916
  - repeat:
      count: '100'
      sequence:
      - service: light.turn_on
        data:
          brightness_step: 1
        target:
          device_id:
          - 18551c9b3c72efc901c3e35633c1e3c7
          - 3cf9c8bc5367cd26edc9b128e7303916
      - delay:
          hours: 0
          minutes: 0
          seconds: 0
          milliseconds: 50
  mode: single
'1693262268843':
  alias: Blinds Halfway (from any position)
  sequence:
  - service: script.roller_blinds_up
    data: {}
  - delay:
      hours: 0
      minutes: 0
      seconds: 18
      milliseconds: 0
  - service: script.roller_blinds_down
    data: {}
  - delay:
      hours: 0
      minutes: 0
      seconds: 9
      milliseconds: 0
  - service: script.roller_blinds_stop
    data: {}
  mode: single
  icon: mdi:roller-shade
spotify_tv:
  alias: Spotify - WiiM Amp
  sequence:
  - choose:
      - conditions:
          - condition: template
            value_template: >-
              {{ 'Living Room WiiM Amp' in (state_attr('media_player.spotify_philip_patterson', 'source_list') or []) }}
        sequence:
          - action: media_player.select_source
            target:
              entity_id: media_player.spotify_philip_patterson
            data:
              source: 'Living Room WiiM Amp'
      - conditions:
          - condition: template
            value_template: >-
              {{ 'WiiM Amp' in (state_attr('media_player.spotify_philip_patterson', 'source_list') or []) }}
        sequence:
          - action: media_player.select_source
            target:
              entity_id: media_player.spotify_philip_patterson
            data:
              source: 'WiiM Amp'
    default: []
  - action: media_player.media_play
    target:
      entity_id: media_player.spotify_philip_patterson
  mode: single
  icon: mdi:spotify
volume_talking:
  alias: Volume Talking
  sequence:
  - metadata: {}
    data:
      volume_level: 0.2
    action: media_player.volume_set
    target:
      entity_id: media_player.living_room_wiimamp
  mode: single
  icon: mdi:volume-low
volume_medium:
  alias: Volume Medium
  sequence:
  - metadata: {}
    data:
      volume_level: 0.4
    action: media_player.volume_set
    target:
      entity_id: media_player.living_room_wiimamp
  mode: single
  icon: mdi:volume-medium
volume_high:
  alias: Volume High
  sequence:
  - metadata: {}
    data:
      volume_level: 0.59
    action: media_player.volume_set
    target:
      entity_id: media_player.living_room_wiimamp
  mode: single
  icon: mdi:volume-high
spotify_off:
  alias: Stop Spotify
  sequence:
  - action: media_player.media_stop
    target:
      entity_id: media_player.living_room_wiimamp
  - action: media_player.media_pause
    target:
      entity_id: media_player.spotify_philip_patterson
  mode: single
  icon: mdi:spotify
new_script:
  alias: YouTube
  sequence:
  - action: remote.turn_on
    data:
      activity: com.google.android.youtube.tv
    target:
      entity_id: remote.tv
  icon: mdi:youtube
  mode: single
spotify:
  alias: Spotify Shortcut
  sequence:
  - service: script.turn_on
    target:
      entity_id: script.spotify_tv
  icon: mdi:spotify
  mode: single
volume_quiet:
  alias: Volume Quiet
  sequence:
  - metadata: {}
    data:
      volume_level: 0.1
    action: media_player.volume_set
    target:
      entity_id: media_player.living_room_wiimamp
  mode: single
  icon: mdi:volume-vibrate
new_roller_blind_stop:
  alias: New Roller Blind Stop
  description: ''
  sequence:
  - service: cover.stop_cover
    target:
      entity_id: cover.roller_blinds_chan1
  - service: timer.cancel
    target:
      entity_id: timer.roller_blind_timer
  - service: input_select.select_option
    target:
      entity_id: input_select.roller_blind_state
    data:
      option: unknown
  mode: single
new_roller_blind_down:
  alias: New Roller Blind Down
  description: ''
  sequence:
  - service: input_select.select_option
    target:
      entity_id: input_select.roller_blind_state
    data:
      option: closing
  - service: timer.start
    target:
      entity_id: timer.roller_blind_timer
  - service: cover.close_cover
    target:
      entity_id: cover.roller_blinds_chan1
    data: {}
  mode: single
new_roller_blind_up:
  alias: New Roller Blind Up
  description: ''
  sequence:
  - service: input_select.select_option
    target:
      entity_id: input_select.roller_blind_state
    data:
      option: opening
  - service: timer.start
    target:
      entity_id: timer.roller_blind_timer
  - service: cover.open_cover
    target:
      entity_id: cover.roller_blinds_chan1
    data: {}
  mode: single
good_night:
  alias: Good Night
  sequence:
  - service: script.roller_blinds_down
    data: {}
  - service: light.turn_off
    target:
      entity_id: all
  - service: input_select.select_option
    target:
      entity_id: input_select.occupancy
    data:
      option: Sleeping
  mode: single
  icon: mdi:weather-night
good_morning:
  alias: Good Morning
  sequence:
  - service: script.roller_blinds_up
    data: {}
  - service: input_select.select_option
    target:
      entity_id: input_select.occupancy
    data:
      option: Home
  mode: single
  icon: mdi:weather-sunny
leaving_home:
  alias: Leaving Home
  sequence:
  - target:
      entity_id: cover.smart_garage_door_garage
    action: cover.close_cover
  - action: climate.turn_off
    data: {}
    target:
      area_id:
      - living_room
      - henry_s_room
      - master_bedroom
      - baby_room
  - action: light.turn_off
    data: {}
    target:
      area_id:
      - back_garden
      - front_entrance
      - kitchen
      - living_room
      - master_bedroom
  - target:
      entity_id: input_select.occupancy
    data:
      option: Away
    action: input_select.select_option
  mode: single
  icon: mdi:home-export-outline
arriving_home:
  alias: Arriving Home
  sequence:
  - choose:
    - conditions:
      - condition: numeric_state
        entity_id: sensor.essendon_airport_temp
        above: 24
      sequence:
      - action: climate.set_hvac_mode
        data:
          hvac_mode: cool
        target:
          area_id:
          - living_room
          - master_bedroom
      - action: climate.set_temperature
        data:
          temperature: 22
        target:
          area_id:
          - living_room
          - master_bedroom
    - conditions:
      - condition: numeric_state
        entity_id: sensor.essendon_airport_temp
        below: 16
      sequence:
      - action: climate.set_hvac_mode
        data:
          hvac_mode: heat
        target:
          area_id:
          - living_room
          - master_bedroom
      - action: climate.set_temperature
        data:
          temperature: 21
        target:
          area_id:
          - living_room
          - master_bedroom
  - condition: state
    entity_id: sun.sun
    state: below_horizon
  - action: light.turn_on
    target:
      area_id:
      - living_room
      - kitchen
      - front_entrance
  - target:
      entity_id: input_select.occupancy
    data:
      option: Home
    action: input_select.select_option
  mode: single
  icon: mdi:home-import-outline

holiday_mode:
  alias: Holiday Mode
  sequence:
  # Turn off all climate devices
  - action: climate.turn_off
    data: {}
    target:
      area_id:
      - living_room
      - henry_s_room
      - master_bedroom
      - baby_room
  # Set alarm to away/armed mode
  - action: alarm_control_panel.alarm_arm_away
    target:
      entity_id: alarm_control_panel.alarmo
    data: {}
  # Note: Auto-presence add-on should be manually enabled in settings
  # Set occupancy to Away
  - target:
      entity_id: input_select.occupancy
    data:
      option: Away
    action: input_select.select_option
  # Close garage
  - target:
      entity_id: cover.smart_garage_door_garage
    action: cover.close_cover
  # Turn off all lights
  - action: light.turn_off
    data: {}
    target:
      entity_id: all
  mode: single
  icon: mdi:airplane-takeoff

water_plants:
  alias: Water Plants
  sequence:
  - action: notify.persistent_notification
    data:
      title: "Watering Plants"
      message: "Running sprinkler for 10 minutes."
  - action: switch.turn_on
    target:
      entity_id: switch.water_switch_switch
  - delay:
      minutes: 10
  - action: switch.turn_off
    target:
      entity_id: switch.water_switch_switch
  - action: notify.persistent_notification
    data:
      title: "Plants Watered"
      message: "Sprinkler finished - plants watered!"
  mode: single
  icon: mdi:watering-can

play_music:
  alias: Play Music
  sequence:
  # Select WiiM Amp as Spotify source and resume playback
  - choose:
      - conditions:
          - condition: template
            value_template: >-
              {{ 'Living Room WiiM Amp' in (state_attr('media_player.spotify_philip_patterson', 'source_list') or []) }}
        sequence:
          - action: media_player.select_source
            target:
              entity_id: media_player.spotify_philip_patterson
            data:
              source: 'Living Room WiiM Amp'
      - conditions:
          - condition: template
            value_template: >-
              {{ 'WiiM Amp' in (state_attr('media_player.spotify_philip_patterson', 'source_list') or []) }}
        sequence:
          - action: media_player.select_source
            target:
              entity_id: media_player.spotify_philip_patterson
            data:
              source: 'WiiM Amp'
    default: []
  # Resume playback (will continue last played track/playlist)
  - action: media_player.media_play
    target:
      entity_id: media_player.spotify_philip_patterson
    data: {}
  mode: single
  icon: mdi:music

open_garage:
  alias: Open Garage
  sequence:
  - action: cover.open_cover
    target:
      entity_id: cover.smart_garage_door_garage
  mode: single
  icon: mdi:garage-open

read_news:
  alias: Read the News
  variables:
    vic_headlines: >-
      {% set entries = state_attr('sensor.abc_victoria_headlines', 'entries') or [] %}
      {% set titles = entries | map(attribute='title') | list %}
      {% if titles %}
        {{ titles[:3] | join('. ') }}
      {% else %}
        No Victoria news available right now.
      {% endif %}
  sequence:
  # Play news briefing on selected room speaker
  - choose:
      - conditions:
          - condition: state
            entity_id: input_select.news_room_selector
            state: 'Kitchen'
        sequence:
          - action: tts.google_translate_say
            target:
              entity_id: media_player.kitchen
            data:
              message: "Here are your news headlines for Victoria. {{ vic_headlines }}"
      - conditions:
          - condition: state
            entity_id: input_select.news_room_selector
            state: 'Study'
        sequence:
          - action: tts.google_translate_say
            target:
              entity_id: media_player.study_speaker
            data:
              message: "Here are your news headlines for Victoria. {{ vic_headlines }}"
      - conditions:
          - condition: state
            entity_id: input_select.news_room_selector
            state: 'Master Bedroom'
        sequence:
          - action: tts.google_translate_say
            target:
              entity_id: media_player.master_bedroom_speaker
            data:
              message: "Here are your news headlines for Victoria. {{ vic_headlines }}"
      - conditions:
          - condition: state
            entity_id: input_select.news_room_selector
            state: 'All Rooms'
        sequence:
          - action: tts.google_translate_say
            target:
              entity_id:
                - media_player.kitchen
                - media_player.study_speaker
                - media_player.master_bedroom_speaker
            data:
              message: "Here are your news headlines for Victoria. {{ vic_headlines }}"
    default: []
  mode: single
  icon: mdi:newspaper
morning_news_briefing:
  alias: Morning News Briefing
  sequence:
    - service: media_player.play_media
      target:
        entity_id: media_player.kitchen
      data:
        media_content_id: "{{ states('sensor.bbc_hourly_bulletin') }}"
        media_content_type: music
    - wait_for_trigger:
        - platform: state
          entity_id:
            - media_player.kitchen
          from: 'playing'
          to: 'idle'
      continue_on_timeout: false
    - service: media_player.play_media
      target:
        entity_id: media_player.kitchen
      data:
        media_content_id: "{{ states('sensor.fiveminutenews') }}"
        media_content_type: music
    - wait_for_trigger:
        - platform: state
          entity_id:
            - media_player.kitchen
          from: 'playing'
          to: 'idle'
      continue_on_timeout: false
    - service: media_player.play_media
      target:
        entity_id: media_player.kitchen
      data:
        media_content_id: "{{ states('sensor.daily_tech_headlines') }}"
        media_content_type: music
    - wait_for_trigger:
        - platform: state
          entity_id:
            - media_player.kitchen
          from: 'playing'
          to: 'idle'
      continue_on_timeout: false
    - service: media_player.play_media
      target:
        entity_id: media_player.kitchen
      data:
        media_content_id: "{{ states('sensor.60_second_sci') }}"
        media_content_type: music
  mode: restart
  icon: mdi:radio

naptime:
  alias: Naptime
  sequence:
  # Close blinds
  - service: script.roller_blinds_down
    data: {}
  # Turn off lights in master bedroom only
  - service: light.turn_off
    target:
      area_id: master_bedroom
  # Set comfortable climate in master bedroom
  - choose:
    - conditions:
      - condition: numeric_state
        entity_id: sensor.essendon_airport_temp
        above: 24
      sequence:
      - action: climate.set_hvac_mode
        data:
          hvac_mode: cool
        target:
          area_id: master_bedroom
      - action: climate.set_temperature
        data:
          temperature: 22
        target:
          area_id: master_bedroom
    - conditions:
      - condition: numeric_state
        entity_id: sensor.essendon_airport_temp
        below: 18
      sequence:
      - action: climate.set_hvac_mode
        data:
          hvac_mode: heat
        target:
          area_id: master_bedroom
      - action: climate.set_temperature
        data:
          temperature: 21
        target:
          area_id: master_bedroom
  # Set ceiling fan to low speed (speed 1)
  - service: script.fan_speed_1
    data: {}
  # Stop music in master bedroom only
  - service: media_player.media_stop
    target:
      area_id: master_bedroom
  mode: single
  icon: mdi:sleep

# ============================================================================
# CLIMATE HELPER SCRIPTS
# ============================================================================
# These scripts encapsulate common climate actions to reduce automation complexity
# Used by 06_living_room_climate_split.yaml and other room automations

set_climate_mode:
  alias: "Set Climate Mode"
  description: "Generic helper to set climate hvac_mode (heat/cool/dry/fan_only/off)"
  fields:
    climate_entity:
      description: "Climate entity to control"
      example: "climate.living_room_versatile_thermostat"
    hvac_mode:
      description: "HVAC mode (heat, cool, dry, fan_only, off)"
      example: "heat"
  sequence:
    - action: climate.set_hvac_mode
      target:
        entity_id: "{{ climate_entity }}"
      data:
        hvac_mode: "{{ hvac_mode }}"
  mode: single

set_climate_preset:
  alias: "Set Climate Preset"
  description: "Generic helper to set climate preset mode (comfort/eco/boost/frost/none)"
  fields:
    climate_entity:
      description: "Climate entity to control"
      example: "climate.living_room_versatile_thermostat"
    preset_mode:
      description: "Preset mode (comfort, eco, boost, frost, none)"
      example: "comfort"
  sequence:
    - action: climate.set_preset_mode
      target:
        entity_id: "{{ climate_entity }}"
      data:
        preset_mode: "{{ preset_mode }}"
  mode: single

set_climate_mode_and_preset:
  alias: "Set Climate Mode and Preset"
  description: "Set both hvac_mode and preset_mode in one call"
  fields:
    climate_entity:
      description: "Climate entity to control"
      example: "climate.living_room_versatile_thermostat"
    hvac_mode:
      description: "HVAC mode (heat, cool, dry, fan_only, off)"
      example: "cool"
    preset_mode:
      description: "Preset mode (comfort, eco, boost, frost, none)"
      example: "comfort"
  sequence:
    - action: climate.set_preset_mode
      target:
        entity_id: "{{ climate_entity }}"
      data:
        preset_mode: "{{ preset_mode }}"
    - action: climate.set_hvac_mode
      target:
        entity_id: "{{ climate_entity }}"
      data:
        hvac_mode: "{{ hvac_mode }}"
  mode: single

activate_dry_mode:
  alias: "Activate Dry Mode"
  description: "Helper to activate dehumidification mode"
  fields:
    climate_entity:
      description: "Climate entity to control"
      example: "climate.living_room_versatile_thermostat"
  sequence:
    - action: script.set_climate_mode_and_preset
      data:
        climate_entity: "{{ climate_entity }}"
        hvac_mode: "dry"
        preset_mode: "comfort"
  mode: single

activate_heating:
  alias: "Activate Heating"
  description: "Helper to activate heating with specified preset"
  fields:
    climate_entity:
      description: "Climate entity to control"
      example: "climate.living_room_versatile_thermostat"
    preset_mode:
      description: "Preset for heating (comfort, eco, frost)"
      example: "comfort"
      default: "comfort"
  sequence:
    - action: script.set_climate_mode_and_preset
      data:
        climate_entity: "{{ climate_entity }}"
        hvac_mode: "heat"
        preset_mode: "{{ preset_mode | default('comfort') }}"
  mode: single

activate_cooling:
  alias: "Activate Cooling"
  description: "Helper to activate cooling with specified preset"
  fields:
    climate_entity:
      description: "Climate entity to control"
      example: "climate.living_room_versatile_thermostat"
    preset_mode:
      description: "Preset for cooling (comfort, eco, boost)"
      example: "comfort"
      default: "comfort"
  sequence:
    - action: script.set_climate_mode_and_preset
      data:
        climate_entity: "{{ climate_entity }}"
        hvac_mode: "cool"
        preset_mode: "{{ preset_mode | default('comfort') }}"
  mode: single

activate_fan_only:
  alias: "Activate Fan Only"
  description: "Helper to activate fan-only mode (circulation without heating/cooling)"
  fields:
    climate_entity:
      description: "Climate entity to control"
      example: "climate.living_room_versatile_thermostat"
    preset_mode:
      description: "Preset mode (eco, comfort)"
      example: "eco"
      default: "eco"
  sequence:
    - action: script.set_climate_mode_and_preset
      data:
        climate_entity: "{{ climate_entity }}"
        hvac_mode: "fan_only"
        preset_mode: "{{ preset_mode | default('eco') }}"
  mode: single

deactivate_climate:
  alias: "Deactivate Climate"
  description: "Helper to turn off climate device safely"
  fields:
    climate_entity:
      description: "Climate entity to control"
      example: "climate.living_room_versatile_thermostat"
  sequence:
    - action: climate.set_hvac_mode
      target:
        entity_id: "{{ climate_entity }}"
      data:
        hvac_mode: "off"
  mode: single

record_climate_trigger:
  alias: "Record Climate Trigger"
  description: "Record that a climate automation was triggered (for tracking)"
  fields:
    counter_entity:
      description: "Counter entity to increment (e.g., input_number.living_room_night_triggers)"
      example: "input_number.living_room_night_triggers_today"
    datetime_entity:
      description: "Datetime entity to update with trigger time"
      example: "input_datetime.last_trigger_living_room_night"
  sequence:
    - action: input_number.increment
      target:
        entity_id: "{{ counter_entity }}"
    - action: input_datetime.set_datetime
      target:
        entity_id: "{{ datetime_entity }}"
      data:
        datetime: "{{ now().isoformat() }}"
  mode: single

# ============================================================================
# COMPUTER DESK CONTROL SCRIPTS
# ============================================================================
# Control computer power via smart outlet (switch.computer_plug_switch)
# See: docs/COMPUTER_DESK_CONTROL_DECISION_GUIDE.md for setup details

computer_power_on:
  alias: "Computer - Power On"
  description: "Turn on computer via smart outlet plug"
  sequence:
    - action: switch.turn_on
      target:
        entity_id: switch.computer_plug_switch
    - action: notify.persistent_notification
      data:
        title: "Computer Power"
        message: "Computer powered on via outlet. Waiting for system to boot..."
  mode: single
  icon: mdi:power-on

computer_power_off:
  alias: "Computer - Power Off"
  description: "Turn off computer via smart outlet (CAUTION: Force shutdown - ensure work is saved!)"
  sequence:
    - action: notify.persistent_notification
      data:
        title: "Computer Shutdown"
        message: "Force powering off computer in 5 seconds - ensure all work is saved!"
    - delay:
        seconds: 5
    - action: switch.turn_off
      target:
        entity_id: switch.computer_plug_switch
    - action: notify.persistent_notification
      data:
        title: "Computer Power"
        message: "Computer powered off via outlet"
  mode: single
  icon: mdi:power-off
