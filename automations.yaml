- id: '1644318707340'
  alias: 'Close Blinds > 22 Degrees '
  description: During hot daylight hours only
  trigger:
  - platform: time_pattern
    minutes: '15'
  - platform: time_pattern
    minutes: '30'
  - platform: time_pattern
    minutes: '45'
  condition:
  - type: is_not_open
    condition: device
    device_id: 73d77b02a3b8c93387e8cd225b08eb91
    entity_id: bef4e1118f2b80f51f78dab61a495896
    domain: binary_sensor
  - condition: time
    after: '11:00:00'
    before: '18:00:00'
  action:
  - choose:
    - conditions:
      - condition: and
        conditions:
        - type: is_humidity
          condition: device
          device_id: 9904a0122b1c1edc01e954d58c97e826
          entity_id: dce670b9de8e2d94d4d11c0563ee2aac
          domain: sensor
          above: 20
      sequence:
      - if:
        - condition: state
          entity_id: input_select.occupancy
          state: Home
        then:
        - data: {}
          action: script.fan_speed_1
      - action: cover.close_cover
        metadata: {}
        data: {}
        target:
          entity_id: cover.roller_blinds_chan1
      - choose:
        - conditions:
          - condition: and
            conditions:
            - type: is_humidity
              condition: device
              device_id: 9904a0122b1c1edc01e954d58c97e826
              entity_id: dce670b9de8e2d94d4d11c0563ee2aac
              domain: sensor
              above: 24
          sequence:
          - action: cover.close_cover
            metadata: {}
            data: {}
            target:
              entity_id: cover.windowcovering_cover
          - action: climate.turn_on
            metadata: {}
            data: {}
            target:
              entity_id: climate.masterbed_versatile_thermostate
          - action: climate.set_hvac_mode
            target:
              entity_id: climate.masterbed_versatile_thermostate
            data:
              hvac_mode: cool
      alias: Too Hot, Blinds Down Fan On
    - conditions:
      - condition: and
        conditions:
        - type: is_temperature
          condition: device
          device_id: 9904a0122b1c1edc01e954d58c97e826
          entity_id: 285c92fd806469a80a6e925666f27d3f
          domain: sensor
          below: 20
      sequence:
      - data: {}
        action: script.fan_off
      - action: cover.open_cover
        metadata: {}
        data: {}
        target:
          entity_id:
          - cover.roller_blinds_chan1
          - cover.windowcovering_cover
      - action: climate.turn_off
        metadata: {}
        data: {}
        target:
          entity_id: climate.masterbed_versatile_thermostate
      alias: Too cold, blinds up, fan off
  mode: single
- id: '1644398227874'
  alias: turn on lounge lights at 20 min before sunset
  description: ''
  trigger:
  - platform: numeric_state
    entity_id: sun.sun
    attribute: elevation
    below: '5'
  condition:
  - condition: not
    conditions:
    - condition: state
      entity_id: input_select.occupancy
      state: Holiday
  action:
  - service: light.turn_on
    target:
      area_id:
      - master_bedroom
      - henry_s_room
      - living_room
    data: {}
  mode: single
- id: '1644398278136'
  alias: lounge lights off at night
  description: ''
  trigger:
  - platform: time
    at: '22:15:00'
  - platform: calendar
    event: start
    offset: 0:0:0
    entity_id: calendar.early_to_bed
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.occupancy
      state: Sleeping
    - condition: state
      entity_id: input_select.occupancy
      state: Home
  action:
  - type: turn_off
    device_id: a4c9fa6c4205ff2778142853b379e0c5
    entity_id: remote.sony_kd_55x8500c
    domain: remote
  - service: climate.turn_off
    data: {}
    target:
      entity_id: climate.living_room_ac
  - service: input_select.select_option
    data:
      option: Sleeping
    target:
      entity_id: input_select.occupancy
  - service: light.turn_off
    data:
      transition: 120
    target:
      area_id:
      - kitchen
      - living_room
      - henry_s_room
      - master_bedroom
  mode: single
- id: '1644402690423'
  alias: Close blinds at night
  description: ''
  trigger:
  - platform: time
    at: '21:30:00'
  condition: []
  action:
  - action: cover.close_cover
    metadata: {}
    data: {}
    target:
      entity_id:
      - cover.roller_blinds_chan1
      - cover.windowcovering_cover
  mode: single
- id: '1644437526740'
  alias: open blinds in the morning
  description: ''
  trigger:
  - platform: time
    at: input_datetime.wakeup_time_phil_steph
  condition:
  - condition: state
    entity_id: input_boolean.hot_today_flag
    state: 'off'
  action:
  - action: cover.open_cover
    metadata: {}
    data: {}
    target:
      entity_id:
      - cover.roller_blinds_chan1
      - cover.windowcovering_cover
  mode: single
- id: '1647520935523'
  alias: Camera test driveway
  description: ''
  trigger:
  - type: motion
    platform: device
    device_id: 4cadedd6aad3623038c4725e3f43188f
    entity_id: binary_sensor.driveway_cam_motion
    domain: binary_sensor
  condition: []
  action:
  - service: media_player.play_media
    target:
      entity_id: media_player.kitchen
    data:
      media_content_id: media-source://camera/camera.driveway_cam
      media_content_type: application/vnd.apple.mpegurl
    metadata:
      title: Driveway Cam
      thumbnail: /api/camera_proxy/camera.driveway_cam
      media_class: video
      children_media_class:
      navigateIds:
      - {}
      - media_content_type: app
        media_content_id: media-source://camera
  mode: single
- id: '1647521016663'
  alias: Camera test door
  description: ''
  trigger:
  - type: motion
    platform: device
    device_id: 92ce4d5d5c029a9e37a00e2bf4573f3c
    entity_id: binary_sensor.bi_door_camera_motion
    domain: binary_sensor
  condition: []
  action:
  - service: media_player.play_media
    target:
      entity_id: media_player.kitchen
    data:
      media_content_id: media-source://camera/camera.bi_door_camera
      media_content_type: image/jpeg
    metadata:
      title: BI Door Camera
      thumbnail: /api/camera_proxy/camera.bi_door_camera
      media_class: video
      children_media_class:
      navigateIds:
      - {}
      - media_content_type: app
        media_content_id: media-source://camera
  mode: single
- id: '1648979867608'
  alias: Send a camera snapshot when motion is detected - phil
  description: ''
  use_blueprint:
    path: vorion/send-camera-snapshot-notification-on-motion.yaml
    input:
      motion_sensor: binary_sensor.bi_door_camera_motion
      camera: camera.bi_front_door_camera
      notify_device: c054264b79e6739a057236f3a3c512b4
      delay: 1
- id: '1649108238334'
  alias: Txt steph on way home
  description: ''
  trigger:
  - platform: zone
    entity_id: person.phil_patterson
    zone: zone.work
    event: leave
  condition: []
  action:
  - service: notify.mobile_app_slvdh
    data:
      message: Phil is leaving work area now
      title: Phil leaves work
  mode: single
- id: '1649147714100'
  alias: Phil/steph home open garage
  description: ''
  trigger:
  - platform: device
    device_id: c054264b79e6739a057236f3a3c512b4
    domain: device_tracker
    entity_id: device_tracker.sm_s908e
    type: enters
    zone: zone.home
  - platform: device
    device_id: 58e2eb1fec0eb5ec9ce450433d074fcf
    domain: device_tracker
    entity_id: device_tracker.slvdh_2
    type: enters
    zone: zone.home
  condition: []
  action:
  - device_id: 7edad8ef01a718694f8a423cbfdca0c0
    domain: cover
    entity_id: cover.smart_garage_door_garage
    type: open
  - device_id: d0246dd7b63468505017ec29f63e3d86
    domain: alarm_control_panel
    entity_id: alarm_control_panel.alarmo
    type: disarm
  mode: single
- id: '1649148675412'
  alias: Lights on am
  description: ''
  trigger:
  - type: value
    platform: device
    device_id: c054264b79e6739a057236f3a3c512b4
    entity_id: sensor.samsung_galaxy_s22_ultra_sleep_confidence
    domain: sensor
    below: 80
  - type: value
    platform: device
    device_id: 58e2eb1fec0eb5ec9ce450433d074fcf
    entity_id: sensor.slvdh_floors_descended
    domain: sensor
    above: 1
  - platform: time
    at: 05:00:00
  condition:
  - condition: sun
    before: sunrise
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.occupancy
      state: Home
    - condition: state
      entity_id: input_select.occupancy
      state: Sleeping
    - condition: state
      entity_id: input_select.occupancy
      state: Guest
    alias: Someone Home
  action:
  - service: light.turn_on
    metadata: {}
    data: {}
    target:
      area_id:
      - kitchen
      - living_room
  mode: single
- id: '1655607456252'
  alias: Dim the lights at 8pm
  description: ''
  trigger:
  - platform: time
    at: '20:00:00'
  condition:
  - condition: or
    conditions:
    - condition: device
      type: is_off
      device_id: 1d56affa255e58f16de182a278c4965f
      entity_id: fda71f9209c97e761f7d018643b4d0b8
      domain: light
    - condition: device
      type: is_off
      device_id: 85033fd25fd770cd2ec0ffc76e107d3d
      entity_id: 78dfba29350243dbccf4dfcc7cc8492a
      domain: light
  action:
  - service: scene.turn_on
    target:
      entity_id: scene.master_bedroom_dimming
    metadata: {}
  mode: single
- id: '1657702278131'
  alias: Dimmed Master bedroom lights
  description: ''
  trigger:
  - platform: device
    type: changed_states
    device_id: 18551c9b3c72efc901c3e35633c1e3c7
    entity_id: light.gld064ha
    domain: light
  - platform: device
    type: changed_states
    device_id: 3cf9c8bc5367cd26edc9b128e7303916
    entity_id: light.gld064ha_2
    domain: light
  condition:
  - condition: sun
    before: sunrise
    after: sunrise
    after_offset: '120'
  action:
  - service: scene.turn_on
    target:
      entity_id: scene.master_bedroom_dimming
    metadata: {}
  mode: single
- id: '1662634152654'
  alias: 'Master bedroom lights 1% brightness '
  description: Between 8pm-8am lights are low brightness
  trigger:
  - platform: device
    type: turned_on
    device_id: 1d56affa255e58f16de182a278c4965f
    entity_id: fda71f9209c97e761f7d018643b4d0b8
    domain: light
  - platform: device
    type: turned_on
    device_id: 85033fd25fd770cd2ec0ffc76e107d3d
    entity_id: 78dfba29350243dbccf4dfcc7cc8492a
    domain: light
  condition:
  - condition: time
    before: 08:00:00
    after: '20:00:00'
  action:
  - alias: Check which light is on and turn it to 1%
    choose:
    - conditions:
      - condition: device
        type: is_on
        device_id: 1d56affa255e58f16de182a278c4965f
        entity_id: fda71f9209c97e761f7d018643b4d0b8
        domain: light
      sequence:
      - service: light.turn_on
        target:
          entity_id:
          - light.reading_light_none
        data:
          brightness: 1
    - conditions:
      - condition: device
        type: is_on
        device_id: 85033fd25fd770cd2ec0ffc76e107d3d
        entity_id: 78dfba29350243dbccf4dfcc7cc8492a
        domain: light
      sequence:
      - service: light.turn_on
        target:
          entity_id: light.sleeping_light
        data:
          brightness: 1
  mode: single
- id: '1662761539613'
  alias: Occupancy State from Sleep to Home
  description: At sunrise
  trigger:
  - platform: sun
    event: sunrise
    offset: 0
    enabled: false
  - type: value
    platform: device
    device_id: c054264b79e6739a057236f3a3c512b4
    entity_id: sensor.samsung_galaxy_s22_ultra_sleep_confidence
    domain: sensor
    above: 99
    enabled: false
  - platform: time
    at: input_datetime.wakeup_time_phil_steph
  - platform: state
    entity_id:
    - input_button.wake_up_start
  condition:
  - condition: state
    entity_id: input_select.occupancy
    state: Sleeping
  action:
  - service: input_select.select_option
    data:
      option: Home
    target:
      entity_id: input_select.occupancy
  mode: single
- id: '1665308479762'
  alias: Heater at 530am living room if cold
  description: ''
  trigger:
  - platform: time
    at: 05:30:00
  condition:
  - condition: or
    conditions:
    - type: is_temperature
      condition: device
      device_id: ebf0379e33b2ccccd4ee6b6c351f4ce5
      entity_id: sensor.ble_temperature_kitchen_temp_humidity_sensor
      domain: sensor
      below: 17.5
    - type: is_temperature
      condition: device
      device_id: 4d7546906b50573a9ce56a4a8c04ff90
      entity_id: sensor.livingroom_irblaster_temperature
      domain: sensor
      below: 17.5
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.occupancy
      state: Home
    - condition: state
      entity_id: input_select.occupancy
      state: Sleeping
  - condition: state
    entity_id: input_boolean.hot_today_flag
    state: 'off'
  action:
  - data:
      preset_mode: comfort
    target:
      entity_id: climate.living_room_versatile_thermastat
    action: climate.set_preset_mode
  - action: climate.set_hvac_mode
    target:
      entity_id:
      - climate.living_room_versatile_thermastat
    data:
      hvac_mode: heat
  - wait_for_trigger:
    - platform: numeric_state
      entity_id:
      - sensor.livingroom_irblaster_temperature
      above: 19
    continue_on_timeout: true
    timeout:
      hours: 2
      minutes: 0
      seconds: 0
      milliseconds: 0
  - action: climate.turn_off
    metadata: {}
    data: {}
    target:
      entity_id: climate.living_room_versatile_thermastat
  mode: single
- id: '1672988382648'
  alias: Laundry Notification
  description: Notify when the laundry is done
  trigger:
  - type: power
    platform: device
    device_id: 838c3ad5fd43301b577c135fa3c773da
    entity_id: 3ffa5b81f4bf2306b02b6123bbbddea8
    domain: sensor
    above: 50
    for:
      hours: 0
      minutes: 20
      seconds: 0
    id: Laundry_On
  - type: power
    platform: device
    device_id: 838c3ad5fd43301b577c135fa3c773da
    entity_id: 3ffa5b81f4bf2306b02b6123bbbddea8
    domain: sensor
    for:
      hours: 0
      minutes: 20
      seconds: 0
    id: Laundry_Off
    below: 50
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.laundry_on
        state: 'on'
      sequence:
      - data:
          message: Laundry is done
        action: notify.mobile_app_samsung_galaxy_s22_ultra
      - data:
          message: Laundry is done
        action: notify.mobile_app_slvdh
      - data:
          cache: false
          entity_id: media_player.kitchen
          message: Drier or washing machine have finished.
        action: tts.google_translate_say
      - target:
          entity_id: input_boolean.laundry_on
        action: input_boolean.turn_off
        data: {}
    - conditions:
      - condition: state
        entity_id: input_boolean.laundry_on
        state: 'off'
      sequence:
      - target:
          entity_id: input_boolean.laundry_on
        action: input_boolean.turn_on
        data: {}
  mode: single
- id: '1673864135673'
  alias: Masterbedroom Fan Temperature High
  description: ''
  trigger:
  - type: temperature
    platform: device
    device_id: 9904a0122b1c1edc01e954d58c97e826
    entity_id: sensor.ble_temperature_masterbed_temp_humidity_sensor
    domain: sensor
    above: 20
    for:
      hours: 0
      minutes: 20
      seconds: 0
  condition: []
  action:
  - service: cover.close_cover
    target:
      entity_id: cover.roller_blinds_chan1
    data: {}
  - service: fan.set_percentage
    target:
      entity_id: fan.masterbedroom_fan
    data:
      percentage: 33
  mode: single
- id: '1677490997108'
  alias: Low battery level detection & notification for all battery sensors
  description: ''
  use_blueprint:
    path: sbyx/low-battery-level-detection-notification-for-all-battery-sensors.yaml
    input:
      actions:
      - device_id: c054264b79e6739a057236f3a3c512b4
        domain: mobile_app
        type: notify
        message: '{{sensors}}'
        title: Low battery warning
      - device_id: 58e2eb1fec0eb5ec9ce450433d074fcf
        domain: mobile_app
        type: notify
        message: '{{sensors}}'
        title: Low battery warning
      threshold: 25
      exclude:
        entity_id: []
        device_id:
        - 58e2eb1fec0eb5ec9ce450433d074fcf
        - c054264b79e6739a057236f3a3c512b4
- id: '1681337163617'
  alias: Occupancy Away
  description: If nobody home
  trigger:
  - platform: zone
    entity_id: person.phil_patterson
    zone: zone.home
    event: leave
  - platform: zone
    entity_id: person.stephanie_patterson
    zone: zone.home
    event: leave
  - platform: state
    entity_id:
    - zone.home
    to: '0'
    for:
      hours: 0
      minutes: 10
      seconds: 0
  condition:
  - condition: not
    conditions:
    - condition: state
      entity_id: input_select.occupancy
      state: Away
  action:
  - service: input_select.select_option
    data:
      option: Away
    target:
      entity_id: input_select.occupancy
  mode: single
- id: '1681548980319'
  alias: Occupancy Home
  description: On arrival home
  trigger:
  - platform: zone
    entity_id: person.stephanie_patterson
    zone: zone.home
    event: enter
  - platform: zone
    entity_id: device_tracker.sm_s908e
    zone: zone.home
    event: enter
  - platform: state
    entity_id:
    - zone.home
    from: '0'
  condition:
  - condition: not
    conditions:
    - condition: state
      entity_id: input_select.occupancy
      state: Home
  action:
  - service: input_select.select_option
    data:
      option: Home
    target:
      entity_id: input_select.occupancy
  mode: single
- id: '1681557115756'
  alias: Arm Alarm Home/Away
  description: ''
  trigger:
  - platform: state
    entity_id:
    - input_select.occupancy
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_select.occupancy
        state: Away
      sequence:
      - device_id: d0246dd7b63468505017ec29f63e3d86
        domain: alarm_control_panel
        entity_id: alarm_control_panel.alarmo
        type: arm_away
    - conditions:
      - condition: state
        entity_id: input_select.occupancy
        state: Home
      sequence:
      - device_id: d0246dd7b63468505017ec29f63e3d86
        domain: alarm_control_panel
        entity_id: alarm_control_panel.alarmo
        type: disarm
    - conditions:
      - condition: state
        entity_id: input_select.occupancy
        state: Sleeping
      sequence:
      - device_id: d0246dd7b63468505017ec29f63e3d86
        domain: alarm_control_panel
        entity_id: alarm_control_panel.alarmo
        type: arm_night
  mode: single
- id: '1681617191471'
  alias: Theme - Set Default Theme
  description: ''
  trigger:
  - platform: homeassistant
    event: start
  condition: []
  action:
  - service: frontend.set_theme
    data:
      name: waves
  mode: single
- id: '1681731859692'
  alias: Arm Night Alarm
  description: ''
  trigger:
  - platform: time
    at: '21:00:00'
    enabled: false
  - platform: state
    entity_id:
    - input_select.occupancy
    from: Home
    to: Sleeping
  - platform: time
    at: input_datetime.bedtime_phil_steph
  condition:
  - condition: time
    after: '19:00:00'
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_select.occupancy
        state: Away
      sequence:
      - wait_for_trigger:
        - platform: state
          entity_id:
          - input_select.occupancy
          from: Away
          to: Home
          for:
            hours: 4
            minutes: 0
            seconds: 0
        continue_on_timeout: false
      - device_id: d0246dd7b63468505017ec29f63e3d86
        domain: alarm_control_panel
        entity_id: alarm_control_panel.alarmo
        type: arm_night
    - conditions:
      - condition: state
        entity_id: input_select.occupancy
        state: Home
      sequence:
      - device_id: d0246dd7b63468505017ec29f63e3d86
        domain: alarm_control_panel
        entity_id: alarm_control_panel.alarmo
        type: arm_night
    - conditions:
      - condition: state
        entity_id: input_select.occupancy
        state: Holiday
      sequence:
      - stop: Not required. Alarm already set.
    - conditions:
      - condition: state
        entity_id: input_select.occupancy
        state: Sleeping
      sequence:
      - device_id: d0246dd7b63468505017ec29f63e3d86
        domain: alarm_control_panel
        entity_id: alarm_control_panel.alarmo
        type: arm_night
    default:
    - device_id: d0246dd7b63468505017ec29f63e3d86
      domain: alarm_control_panel
      entity_id: alarm_control_panel.alarmo
      type: arm_night
  - device_id: c054264b79e6739a057236f3a3c512b4
    domain: mobile_app
    type: notify
    message: ''
    enabled: false
  - service: notify.mobile_app_samsung_galaxy_s22_ultra
    data:
      message: Home has detected youre not at home. Are you coming home?
      title: 'Action: are you coming home tonight?'
    enabled: false
  mode: single
- id: '1682493497365'
  alias: Phil's left work
  description: ''
  trigger:
  - platform: device
    device_id: c054264b79e6739a057236f3a3c512b4
    domain: device_tracker
    entity_id: device_tracker.sm_s908e
    type: leaves
    zone: zone.work
  condition: []
  action:
  - service: notify.mobile_app_slvdh
    metadata: {}
    data:
      message: Phil has left work
  mode: single
- id: '1682548783368'
  alias: Blinds open, if windy
  description: ''
  trigger:
  - platform: template
    value_template: '{{ state_attr(''weather.home'', ''wind_speed'') > 40}}'
    for:
      hours: 0
      minutes: 2
      seconds: 0
  condition: []
  action:
  - variables:
      original_position: '{{ states(''cover.roller_blinds_chan1'') }}'
  - service: cover.open_cover
    data: {}
    target:
      entity_id: cover.roller_blinds_chan1
  - service: notify.mobile_app_samsung_galaxy_s22_ultra
    data:
      title: 'Safety alert: high winds'
      message: Roller blinds up
  - wait_for_trigger:
    - platform: template
      value_template: '{{ state_attr(''weather.home'', ''wind_speed'') < 25 }}'
    continue_on_timeout: false
  - service: notify.mobile_app_samsung_galaxy_s22_ultra
    data:
      title: Wind speed reduced
      message: Blinds can go back down
  - service_template: "{% if original_state == 'closed' %}\n  cover.close_cover\n{%
      elif original_state == 'open' %}\n  cover.open_cover\n{% else %}\n  cover.stop_cover\n{%
      endif %} \n"
    target:
      entity_id: cover.roller_blinds_chan1
    alias: Return blinds to prev state
  mode: single
- id: '1682671706426'
  alias: Wake Up Routine
  description: ''
  trigger:
  - platform: time
    at: input_datetime.wakeup_time_phil_steph
    id: Phil/Steph
  - platform: time
    at: input_datetime.henry_wake_up
    id: Henry
  - platform: time
    at: input_datetime.otto_s_wake_up
    id: Otto
  - platform: state
    entity_id:
    - input_button.wake_up_phil_steph
    id: Phil/Steph but
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.occupancy
      state: Home
    - condition: state
      entity_id: input_select.occupancy
      state: Sleeping
  action:
  - choose:
    - conditions:
      - condition: or
        conditions:
        - condition: trigger
          id: Phil/Steph
        - condition: trigger
          id: Phil/Steph but
      sequence:
      - data:
          hvac_mode: 'off'
          temperature: 18
        target:
          entity_id:
          - climate.masterbed_ac
        action: climate.set_temperature
      - data: {}
        target:
          entity_id: fan.masterbedroom_fan
        action: fan.turn_off
      - data: {}
        target:
          entity_id:
          - input_boolean.sleep_night_setback
          - input_boolean.cooler_sleep_night_auto
        enabled: false
        action: input_boolean.turn_off
      - if:
        - condition: sun
          before: sunrise
        then:
        - data: {}
          enabled: false
          action: script.1686171686731
        - data:
            transition: 200
            brightness: 255
          target:
            entity_id: light.lounge
          action: light.turn_on
      - device_id: d0246dd7b63468505017ec29f63e3d86
        domain: alarm_control_panel
        entity_id: alarm_control_panel.alarmo
        type: disarm
      - data:
          option: Home
        target:
          entity_id: input_select.occupancy
        action: input_select.select_option
      - data: {}
        target:
          entity_id:
          - light.lounge
          - light.kitchen_light_socket_1
        action: light.turn_off
      - if:
        - condition: state
          entity_id: calendar.working_from_home
          attribute: all_day
          state: ''
        then:
        - data: {}
          target:
            entity_id: input_boolean.computer_switch
          action: input_boolean.turn_on
      - delay:
          hours: 0
          minutes: 15
          seconds: 0
          milliseconds: 0
      - if:
        - condition: state
          entity_id: climate.living_room_ac
          state: heat
        then:
        - data:
            hvac_mode: 'off'
          target:
            entity_id: climate.living_room_ac
          action: climate.set_hvac_mode
        enabled: false
    - conditions:
      - condition: trigger
        id: Henry
        enabled: false
      sequence:
      - data:
          hvac_mode: 'off'
          temperature: 20
        target:
          entity_id: climate.study_ac_2
        enabled: false
        action: climate.set_temperature
    - conditions:
      - condition: trigger
        id: Otto
        enabled: false
      sequence:
      - data:
          hvac_mode: 'off'
          temperature: 20
        target:
          entity_id: climate.otto_s_ac
        enabled: false
        action: climate.set_temperature
  - if:
    - condition: or
      conditions:
      - condition: trigger
        id: Phil/Steph
      - condition: trigger
        id: Henry
      - condition: trigger
        id: Otto
      - condition: trigger
        id:
        - Phil/Steph but
    - condition: or
      conditions:
      - condition: state
        entity_id: input_boolean.cooler_sleep_night_auto
        state: 'on'
      - condition: state
        entity_id: input_boolean.sleep_night_setback
        state: 'on'
    then:
    - data: {}
      target:
        entity_id:
        - input_boolean.sleep_night_setback
        - input_boolean.cooler_sleep_night_auto
      enabled: false
      action: input_boolean.turn_off
    enabled: false
  mode: single
- id: '1684410637520'
  alias: Send actionable notifications for workday
  description: ''
  use_blueprint:
    path: vorion/actionable-notifications-for-android.yaml
    input:
      notify_device: c054264b79e6739a057236f3a3c512b4
      trigger_entity: input_boolean.computer_switch
      notification_title: Workday Today
      notification_message: Want the computer desk on?
      persistent_notification: false
      action_1_title: 'On'
      first_action:
      - type: turn_on
        device_id: 399b754fdf1cb07ed6c2bfcf22f86dce
        entity_id: switch.study_switch_socket_1
        domain: switch
      - service: input_boolean.turn_off
        target:
          entity_id:
          - input_boolean.computer_switch
        data: {}
      action_2_title: 'Off'
      second_action:
      - type: turn_off
        device_id: 399b754fdf1cb07ed6c2bfcf22f86dce
        entity_id: switch.study_switch_socket_1
        domain: switch
      - service: input_boolean.turn_off
        data: {}
        target:
          entity_id: input_boolean.computer_switch
      action_3_title: Delay 5 min
      third_action:
      - delay:
          hours: 0
          minutes: 5
          seconds: 0
          milliseconds: 0
- id: '1684787591500'
  alias: Send actionable notifications for Alarmo
  description: Sends alarm setup question
  use_blueprint:
    path: vorion/actionable-notifications-for-android.yaml
    input:
      notify_device: c054264b79e6739a057236f3a3c512b4
      trigger_entity: input_boolean.alarmo_actionable_notification
      notification_title: Alarm Setup
      action_1_title: Away
      first_action:
      - device_id: d0246dd7b63468505017ec29f63e3d86
        domain: alarm_control_panel
        entity_id: alarm_control_panel.alarmo
        type: arm_away
      action_2_title: Night
      second_action:
      - device_id: d0246dd7b63468505017ec29f63e3d86
        domain: alarm_control_panel
        entity_id: alarm_control_panel.alarmo
        type: arm_night
      action_3_title: Disarm
      third_action:
      - device_id: d0246dd7b63468505017ec29f63e3d86
        domain: alarm_control_panel
        entity_id: alarm_control_panel.alarmo
        type: disarm
- id: '1684789400363'
  alias: Lights off if on in morning
  description: ''
  trigger:
  - platform: sun
    event: sunrise
    offset: 00:15:00
  condition:
  - condition: state
    entity_id: light.lounge
    state: 'on'
  action:
  - service: light.turn_off
    data: {}
    target:
      area_id:
      - living_room
      - kitchen
      - master_bedroom
      - henry_s_room
  mode: single
- id: '1684838584422'
  alias: Tag Test is scanned
  description: Lounge lights on/off
  trigger:
  - platform: tag
    tag_id: 3580b443-baad-4632-b40e-14b8effeddab
  condition: []
  action:
  - if:
    - condition: state
      entity_id: light.lounge
      state: 'on'
    then:
    - service: light.turn_off
      data:
        transition: 10
      target:
        entity_id: light.lounge
    else:
    - service: light.turn_on
      data:
        brightness: 20
      target:
        entity_id: light.lounge
  mode: single
- id: '1684973809451'
  alias: IOS Actionable Notifications
  description: ''
  use_blueprint:
    path: Hypercookie/ios_notification_blueprint.yaml
    input:
      trigger_source: input_button.iphone_notification
      message_content: Test
      message_text: Let Phil know you received
      badge_type: -1
      interruption_level: active
      message_attachment: Disabled
      camera_camera_entity: camera.bi_door_camera
      dummy_4: true
      action_1_action_enabled: true
      action_2_action_enabled: false
      action_1_title: Front door Cam
      camera_hide_thumbnail: false
      target_for_notifications: mobile_app_slvdh
      action_1_action_authentication_required: false
- id: '1685004768034'
  alias: Working from home
  description: 'Trying to predict working from home based on evidence '
  trigger:
  - platform: device
    type: turned_on
    device_id: 399b754fdf1cb07ed6c2bfcf22f86dce
    entity_id: switch.study_switch_socket_1
    domain: switch
  condition:
  - condition: time
    before: 09:00:00
  - condition: state
    entity_id: input_boolean.working_from_home
    state: 'on'
  action:
  - service: input_boolean.turn_on
    data: {}
    target:
      entity_id: input_boolean.working_from_home
  mode: single
- id: '1685005001174'
  alias: End of Workday
  description: Turn off computer and AC after workday
  trigger:
  - platform: time
    at: input_datetime.workday_end
  condition:
  - condition: time
    after: input_datetime.workday_end
  action:
  - if:
    - condition: state
      state: 'on'
      entity_id: switch.henrys_room_plug_switch
    then:
    - data: {}
      target:
        entity_id: input_boolean.computer_switch
      action: input_boolean.turn_on
  - if:
    - condition: device
      type: is_off
      device_id: ac27c1acd87d567603e54ed90f046a50
      entity_id: 41d147d319aab7615baeff5015237de7
      domain: switch
    - condition: time
      before: input_datetime.bedtime_phil_steph
    then:
    - data: {}
      target:
        entity_id: input_boolean.masterbed_a_c_sleep_day_setback
      enabled: true
      action: input_boolean.turn_off
    - data: {}
      target:
        entity_id: climate.henry_s_room_versatile_thermostat
      action: climate.turn_off
  mode: single
- id: '1685157513874'
  alias: Tag Study Desk is scanned
  description: ''
  trigger:
  - platform: tag
    tag_id: c99ee431-d1d8-497c-9f0f-214994610aa6
  condition: []
  action:
  - type: toggle
    device_id: dc326b28df2064ab9f7d9e983e6824e6
    entity_id: 63cfcb8c97058003e378eefffdaa028b
    domain: switch
  - type: toggle
    device_id: ac27c1acd87d567603e54ed90f046a50
    entity_id: 41d147d319aab7615baeff5015237de7
    domain: switch
  mode: single
- id: '1685572749524'
  alias: Tag Blinds is scanned
  description: ''
  trigger:
  - platform: tag
    tag_id: 531bec6b-8dea-4b53-ae0c-5840aca23f70
  condition: []
  action:
  - service: script.roller_blinds_up
    data: {}
    enabled: false
  - service: script.roller_blinds_down
    data: {}
  mode: single
- id: '1685791154995'
  alias: People Home
  description: Changes input boolean of same name depending on occupancy toggle change
  trigger:
  - platform: state
    entity_id:
    - input_select.occupancy
  condition: []
  action:
  - if:
    - condition: or
      conditions:
      - condition: state
        entity_id: input_select.occupancy
        state: Home
      - condition: state
        entity_id: input_select.occupancy
        state: Sleeping
    then:
    - service: input_boolean.turn_on
      data: {}
      target:
        entity_id: input_boolean.people_home
    else:
    - service: input_boolean.turn_off
      data: {}
      target:
        entity_id: input_boolean.people_home
  mode: single
- id: '1685791243798'
  alias: Send a notification with camera snapshot when motion is detected with blocking
    state and URL (or lovelace view) on click, critical or not, collapse or not.
  description: Camera detection
  use_blueprint:
    path: Stan-Gobien/CriticalCollapseOptionNotHomeMotionCameraSnapshotWithClickAction.yaml
    input:
      motion_sensor: binary_sensor.front_door_cam_motion_2
      camera: camera.bi_front_door_camera
      notify_device: c054264b79e6739a057236f3a3c512b4
      blocker_entity: input_boolean.people_home
- id: '1687857604311'
  alias: Turn off Otto's Room Hvac
  description: Turns off Otto's HVAC if the door is open for a period and its during
    non sleeping hours
  trigger:
  - type: opened
    platform: device
    device_id: b7087e9e857a7f8d8cf761de0bc5ed2f
    entity_id: 779451d27e807842e1b6b29e9834eb17
    domain: binary_sensor
    for:
      hours: 0
      minutes: 10
      seconds: 0
  condition:
  - condition: not
    conditions:
    - condition: state
      entity_id: climate.otto_s_ac
      state: 'off'
  - condition: time
    after: 06:00:00
    before: '17:00:00'
    weekday:
    - sun
    - mon
    - tue
    - wed
    - thu
    - fri
    - sat
  action:
  - service: climate.turn_off
    data: {}
    target:
      entity_id: climate.otto_s_room
  mode: single
- id: '1687857643147'
  alias: Climate.HenrysRoom.TurnOff
  description: ''
  trigger:
  - type: opened
    platform: device
    device_id: be01f257a5bdfe026e658a2e9d6dbdea
    entity_id: 3ee5adc163f673d1b6a04cec08669f90
    domain: binary_sensor
    for:
      hours: 0
      minutes: 10
      seconds: 0
  condition:
  - condition: not
    conditions:
    - condition: state
      entity_id: climate.study_ac_2
      state: 'off'
  - condition: sun
    after: sunrise
  action:
  - service: climate.turn_off
    data: {}
    target:
      entity_id: climate.study_ac_2
  - if:
    - condition: or
      conditions:
      - condition: state
        entity_id: input_boolean.cooler_sleep_night_auto
        state: 'on'
      - condition: state
        entity_id: input_boolean.sleep_night_setback
        state: 'on'
    then:
    - service: input_boolean.turn_off
      data: {}
      target:
        entity_id:
        - input_boolean.masterbed_a_c_sleep_day_setback
        - input_boolean.cooler_sleep_night_auto
  mode: single
- id: '1690150562163'
  alias: Tag Masterbed desk left cnr is scanned
  description: ''
  trigger:
  - platform: tag
    tag_id: 38314bff-f8ff-4949-908c-eab6853d970e
  condition: []
  action:
  - service: climate.set_temperature
    data:
      temperature: 22
      hvac_mode: heat
    target:
      area_id: master_bedroom
  - delay:
      hours: 3
      minutes: 0
      seconds: 0
      milliseconds: 0
  - service: script.roller_blinds_up
    data: {}
  mode: single
- id: '1693433717718'
  alias: Tag Masterbed desk left cnr is scanned
  description: ''
  trigger:
  - platform: tag
    tag_id: 9d687fe2-e6f7-4d6f-838a-cee2712e3fdb
  condition: []
  action:
  - service: script.1693262268843
    data: {}
  mode: single
- id: '1694133288157'
  alias: Heaters Off When Leave
  description: ''
  trigger:
  - platform: state
    entity_id:
    - input_select.occupancy
    from: Home
    to: Away
    for:
      hours: 0
      minutes: 20
      seconds: 0
  condition: []
  action:
  - service: climate.set_hvac_mode
    data:
      hvac_mode: 'off'
    target:
      entity_id:
      - climate.study_ac_2
      - climate.living_room_ac
      - climate.masterbed_ac
      - climate.otto_s_ac
  - service: light.turn_off
    data:
      transition: 57
    target:
      area_id:
      - kitchen
      - living_room
      - master_bedroom
  - service: notify.mobile_app_samsung_galaxy_s22_ultra
    data:
      message: Heaters and Lights switched off.
      title: 'Auto-Off: nobody home'
  - service: notify.mobile_app_slvdh
    data:
      message: Heaters and Lights switched off.
      title: 'Auto-Off: nobody home'
  mode: single
- id: '1694242386120'
  alias: Heaters on when home
  description: ''
  trigger:
  - platform: state
    entity_id:
    - input_select.occupancy
    from: Away
    for:
      hours: 0
      minutes: 0
      seconds: 10
  - platform: state
    entity_id:
    - input_select.occupancy
    from: Holiday
    for:
      hours: 0
      minutes: 0
      seconds: 10
  condition:
  - condition: and
    conditions:
    - condition: sun
      after: sunset
    - condition: not
      conditions:
      - condition: state
        entity_id: input_select.occupancy
        state: Sleeping
      alias: Not Sleeping
  action:
  - service: climate.set_fan_mode
    data:
      fan_mode: Heat
    target:
      entity_id:
      - climate.living_room_ac
      - climate.masterbed_ac
  - service: notify.mobile_app_samsung_galaxy_s22_ultra
    data:
      message: Heaters and Lights switched on
      title: 'Auto-on: arrived home'
  - service: light.turn_on
    data:
      transition: 20
    target:
      area_id:
      - kitchen
      - living_room
      - master_bedroom
  - service: climate.turn_on
    data: {}
    target:
      entity_id:
      - climate.living_room_ac
      - climate.masterbed_ac
  mode: single
- id: '1694292629807'
  alias: Heater on in morning
  description: ''
  trigger:
  - platform: template
    value_template: '"{{ now() >= today_at(states(''input_button.wake_up_phil_steph''))
      - timedelta(minutes = 60) }}"'
    alias: -60min Wakeup Phil/Steph
    id: -1hr Offset
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.occupancy
      state: Home
    - condition: state
      entity_id: input_select.occupancy
      state: Sleeping
  - condition: numeric_state
    entity_id: sensor.livingroom_irblaster_temperature
    below: 17
  action:
  - service: climate.turn_on
    data: {}
    target:
      entity_id: climate.living_room_ac
  - service: climate.set_fan_mode
    data:
      fan_mode: Auto
    target:
      entity_id: climate.living_room_ac
  - service: climate.set_temperature
    data:
      temperature: 21
      hvac_mode: heat
    target:
      entity_id: climate.living_room_ac
  mode: single
- id: '1694596580092'
  alias: Tv On/Off
  description: ''
  trigger:
  - platform: device
    type: turned_on
    device_id: a54fb9a78133e7eec040eef4ca052fc9
    entity_id: d909cd5581bd5b7a73feef1654706ba8
    domain: remote
    id: 'On'
  - platform: device
    type: turned_off
    device_id: a54fb9a78133e7eec040eef4ca052fc9
    entity_id: d909cd5581bd5b7a73feef1654706ba8
    domain: remote
    id: 'Off'
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - 'On'
      sequence:
      - type: turn_on
        device_id: eda310c53d64fbfed9908fd266dc8635
        entity_id: f9c445a5c33e26e2b2d9ef2addd13858
        domain: switch
      - if:
        - condition: sun
          after: sunset
        then:
        - service: script.tv_lights_on
          data: {}
    - conditions:
      - condition: trigger
        id:
        - 'Off'
      sequence:
      - service: script.tv_lights_off
        data: {}
      - type: turn_off
        device_id: eda310c53d64fbfed9908fd266dc8635
        entity_id: f9c445a5c33e26e2b2d9ef2addd13858
        domain: switch
  mode: single
- id: '1695506875922'
  alias: Turn off living room heater at 7am
  description: ''
  trigger:
  - platform: time
    at: 07:00:00
  condition:
  - condition: state
    entity_id: input_boolean.hot_today_flag
    state: 'on'
  action:
  - service: climate.set_hvac_mode
    data:
      hvac_mode: 'off'
    target:
      entity_id: climate.living_room_ac
  mode: single
- id: '1695509359232'
  alias: Hot today
  description: Helper automation that changes and input var to on if it is hot today
    depending on the forecast
  trigger:
  - platform: time
    at: 05:30:00
  condition: []
  action:
  - choose:
    - conditions:
      - alias: If forecast > 25
        condition: template
        value_template: '{{ state_attr(''weather.home'', ''forecast'')[0][''temperature'']
          > 25 }}'
      sequence:
      - service: input_boolean.turn_on
        data: {}
        target:
          entity_id: input_boolean.super_hot_today
    - conditions:
      - condition: template
        value_template: '{{ state_attr(''weather.home'', ''forecast'')[0][''temperature'']
          > 21 }}'
        alias: If forecast > 21
      sequence:
      - service: input_boolean.turn_on
        data: {}
        target:
          entity_id: input_boolean.hot_today_flag
    - conditions:
      - condition: template
        value_template: '{{ state_attr(''weather.home'', ''forecast'')[0][''temperature'']
          <= 21 }}'
        alias: If forecast <= 21
      sequence:
      - service: input_boolean.turn_off
        data: {}
        target:
          entity_id:
          - input_boolean.hot_today_flag
          - input_boolean.super_hot_today
  mode: single
- id: '1699526539731'
  alias: Master Fan on if AC on
  description: Turn on Fan to speed 1 if AC is turned on
  trigger:
  - platform: state
    entity_id:
    - climate.masterbed_versatile_thermostate
    to: cool
  condition:
  - condition: not
    conditions:
    - condition: state
      entity_id: fan.masterbedroom_fan
      state: 'on'
  action:
  - service: fan.set_percentage
    metadata: {}
    data:
      percentage: 33
    target:
      entity_id: fan.masterbedroom_fan
  mode: single
- id: '1700272627906'
  alias: Stream cam to home nest
  description: ''
  trigger:
  - type: motion
    platform: device
    device_id: c6e863033a6aa01db5e69f287b01088d
    entity_id: 2ff34789d939d75e89d5bfac2ec897a3
    domain: binary_sensor
  - type: motion
    platform: device
    device_id: 4cadedd6aad3623038c4725e3f43188f
    entity_id: 276953dc5f8a866603f203f272a448a3
    domain: binary_sensor
  - type: motion
    platform: device
    device_id: 25185c0148fc9b5b58b30c968ed8268d
    entity_id: d9d648a77cd47757741d7451351a0f70
    domain: binary_sensor
  condition: []
  action:
  - service: camera.play_stream
    data:
      format: hls
      media_player: media_player.kitchen
    target:
      device_id: 323193309f2af00ef6853c8b84e00a9f
  mode: single
- id: '1703583740639'
  alias: Motion-Activated Light
  description: Turns on the light with motion and off after no motion for 2 minutes.
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.motion_sensor_motion
    to: 'on'
  - platform: state
    entity_id:
    - binary_sensor.motion_sensor_motion
    to: 'off'
    for:
      minutes: 2
  condition:
  - condition: numeric_state
    entity_id: sun.sun
    attribute: elevation
    below: 5
    enabled: false
  - type: is_illuminance
    condition: device
    device_id: ff182513e25375d3e31074d0caed8a9b
    entity_id: bbcd14c8d6ec6c74d00290784818aa79
    domain: sensor
    below: 10
  action:
  - choose:
    - conditions:
      - condition: state
        state: 'on'
        entity_id: binary_sensor.motion_sensor_motion
      sequence:
      - data: {}
        action: light.turn_on
        target:
          entity_id:
          - light.led_strip_office_light
          - light.kitchen_light_socket_1_2
    - conditions:
      - condition: state
        state: 'off'
        entity_id: binary_sensor.motion_sensor_motion
      sequence:
      - data: {}
        action: light.turn_off
        target:
          entity_id:
          - light.led_strip_office_light
          - light.kitchen_light_socket_1
  mode: restart
- id: '1704141233232'
  alias: Green flash with Otto's door open
  description: ''
  trigger:
  - type: opened
    platform: device
    device_id: b7087e9e857a7f8d8cf761de0bc5ed2f
    entity_id: 779451d27e807842e1b6b29e9834eb17
    domain: binary_sensor
    id: Open
  condition:
  - condition: numeric_state
    entity_id: sun.sun
    attribute: elevation
    below: 5
  - condition: time
    after: '19:15:00'
    before: 08:00:00
  action:
  - service: light.turn_on
    target:
      device_id: fee3e1405cfa62d116d3f31ec12a9618
    data:
      flash: short
  mode: single
- id: '1705440129170'
  alias: ZHA - Mijia Wireless Remote Switch (WXKG01LM)
  description: ''
  trigger:
  - platform: event
    event_type: zha_event
    event_data:
      device_id: 5858e6f215e4bc4f5876cb1e82be3dd5
  action:
  - variables:
      click_type: '{{ trigger.event.data.args.click_type }}'
      attrname: '{{ trigger.event.data.args.attribute_name }}'
      value: '{{ trigger.event.data.args.attribute_value }}'
      command: '{{ trigger.event.data.command }}'
  - choose:
    - conditions:
      - condition: template
        value_template: '{{ attrname == ''on_off'' }}'
      - condition: template
        value_template: '{{ value == true }}'
      sequence:
      - wait_for_trigger:
        - platform: event
          event_type: zha_event
          event_data:
            device_id: 5858e6f215e4bc4f5876cb1e82be3dd5
            command: attribute_updated
            args:
              attribute_id: 0
              attribute_name: on_off
              value: false
        continue_on_timeout: true
        timeout: 0.6
      - choose:
        - conditions:
          - condition: template
            value_template: '{{ not wait.trigger }}'
          sequence:
          - device_id: 1237768e2dd98b4fd8a60455b374908d
            domain: light
            entity_id: 7341353cf94f589e859b6d7a8d463077
            type: brightness_increase
        default:
        - type: toggle
          device_id: 1237768e2dd98b4fd8a60455b374908d
          entity_id: 7341353cf94f589e859b6d7a8d463077
          domain: light
    - conditions:
      - condition: template
        value_template: '{{ command == ''click'' }}'
      sequence:
      - choose:
        - conditions:
          - condition: template
            value_template: '{{ click_type == ''double'' }}'
          sequence:
          - device_id: 1237768e2dd98b4fd8a60455b374908d
            domain: light
            entity_id: 7341353cf94f589e859b6d7a8d463077
            type: brightness_decrease
        - conditions:
          - condition: template
            value_template: '{{ click_type == ''triple'' }}'
          sequence: []
        - conditions:
          - condition: template
            value_template: '{{ click_type == ''quadruple'' }}'
          sequence: []
        - conditions:
          - condition: template
            value_template: '{{ click_type == ''furious'' }}'
          sequence: []
  mode: parallel
  max_exceeded: silent
- id: '1705646906838'
  alias: Dishwasher done
  description: Power change less than 50w resultingnin sending notification to s23
    phil and iphone steph
  trigger:
  - type: power
    platform: device
    device_id: 6061744ba3656ae82e93e33c02f2d070
    entity_id: 616d141a6ad937b14ac1f65b5fe12c62
    domain: sensor
    below: 20
    for:
      hours: 0
      minutes: 20
      seconds: 0
  condition: []
  action:
  - data:
      message: Dishwasher is done
    action: notify.mobile_app_samsung_galaxy_s22_ultra
  - data:
      message: Dishwasher is done
    action: notify.mobile_app_slvdh
  mode: single
- id: '1706063916168'
  alias: Water detected
  description: ''
  trigger:
  - type: moist
    platform: device
    device_id: 31301cc533660d63d02b479ee7edfeb6
    entity_id: 3d7056108abc259f11cb5f9d88bce3bd
    domain: binary_sensor
  - type: moist
    platform: device
    device_id: 8ff9a6d91d82ddd9e30bcb8f76356d9e
    entity_id: d5af43c0f1114b2e0d4f85f7f2602981
    domain: binary_sensor
  condition: []
  action:
  - service: notify.mobile_app_samsung_galaxy_s22_ultra
    data:
      message: 'Water Detected at Front Door or laundry '
  - service: notify.mobile_app_slvdh
    metadata: {}
    data:
      title: Water leak detected
      message: Front door sensor has detected a water leak
  mode: single
- id: '1707129145582'
  alias: At Sunset Open Curtains
  description: It's nice to see the sunset. Open the curtains to see it.
  trigger:
  - platform: sun
    event: sunset
    offset: '-20'
    id: Before Sunset
    enabled: true
  condition:
  - condition: not
    conditions:
    - condition: state
      entity_id: input_select.occupancy
      state: Holiday
    alias: Not on Holiday
  - condition: time
    after: 08:00:00
  - condition: sun
    after: sunrise
  action:
  - action: cover.open_cover
    metadata: {}
    data: {}
    target:
      entity_id: cover.windowcovering_cover
  mode: single
- id: '1707562883987'
  alias: Workday
  description: ''
  trigger:
  - platform: device
    type: turned_on
    device_id: dc326b28df2064ab9f7d9e983e6824e6
    entity_id: 63cfcb8c97058003e378eefffdaa028b
    domain: switch
    id: 'On'
  - platform: device
    type: turned_off
    device_id: dc326b28df2064ab9f7d9e983e6824e6
    entity_id: 63cfcb8c97058003e378eefffdaa028b
    domain: switch
    id: 'Off'
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - 'On'
      sequence:
      - type: turn_on
        device_id: ac27c1acd87d567603e54ed90f046a50
        entity_id: 41d147d319aab7615baeff5015237de7
        domain: switch
      - service: climate.set_temperature
        target:
          entity_id: climate.study_ac_2
        data:
          temperature: 23
          hvac_mode: cool
    - conditions:
      - condition: trigger
        id:
        - 'Off'
      sequence:
      - type: turn_off
        device_id: ac27c1acd87d567603e54ed90f046a50
        entity_id: 41d147d319aab7615baeff5015237de7
        domain: switch
      - service: climate.set_temperature
        target:
          entity_id: climate.study_ac_2
        data:
          hvac_mode: 'off'
  mode: single
- id: '1708414101011'
  alias: Maintenance - HVAC filters
  description: Nfc filtered cleaned. Scan red nfc tag when job done
  use_blueprint:
    path: nwithan8/track_and_remind_task.yaml
    input:
      task_name: Maintenance - HVAC Henry
      task_interval: 60
      date_tracker: input_datetime.air_conditioner_henry_s_room
      status_check_time: 08:00:00
      nfc_tag: 49b0f6c5-cc72-4391-9615-b328d6d06459
      due_action:
      - service: notify.mobile_app_samsung_galaxy_s22_ultra
        data:
          title: task_name
          data: task_due_date
- id: '1710134062501'
  alias: Presence
  description: 'Toggles whether home or away based on detailed occupancy sensor '
  trigger:
  - platform: state
    entity_id:
    - input_select.occupancy
    to: Home
    id: Home
    from: Away
  - platform: state
    entity_id:
    - input_select.occupancy
    to: Sleeping
    id: Home
    from: Away
  - platform: state
    entity_id:
    - input_select.occupancy
    id: Away
    from: Home
    to: Away
  - platform: state
    entity_id:
    - input_select.occupancy
    id: Away
    from: Sleeping
    to: Away
  - platform: state
    entity_id:
    - input_select.occupancy
    id: Away
    to: Holiday
  - platform: state
    entity_id:
    - input_select.occupancy
    id: Home
    from: Holiday
  condition: []
  action:
  - if:
    - condition: trigger
      id:
      - Home
    then:
    - service: input_boolean.turn_on
      target:
        entity_id: input_boolean.home_presence
      data: {}
  - if:
    - condition: trigger
      id:
      - Away
    then:
    - service: input_boolean.turn_off
      target:
        entity_id:
        - input_boolean.home_presence
      data: {}
  mode: single
- id: '1710137210171'
  alias: Downstairs Doors Group
  description: 'Binary sensor for any door downstairs. Used for climate control '
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.downstairs_doors
    to: 'on'
    id: Open
  - platform: state
    entity_id:
    - binary_sensor.downstairs_doors
    to: 'off'
    id: Close
  condition: []
  action:
  - alias: Open
    if:
    - condition: trigger
      id:
      - Open
    then:
    - service: input_boolean.turn_on
      target:
        entity_id:
        - input_boolean.downstairs_doors_open
      data: {}
  - alias: Close
    if:
    - condition: trigger
      id:
      - Close
    then:
    - service: input_boolean.turn_off
      target:
        entity_id:
        - input_boolean.downstairs_doors_open
      data: {}
  mode: single
- id: '1711621732424'
  alias: Maintenance - clean toilet
  description: Weekly reminder to clean toilets
  use_blueprint:
    path: nwithan8/track_and_remind_task.yaml
    input:
      task_name: Clean Toilets
      task_interval: 7
      nfc_tag: 14544260-abc9-4e84-be5b-20b3df57978d
      date_tracker: input_datetime.clean_toielts
      status_check_time: 08:00:00
      due_action:
      - service: notify.mobile_app_slvdh
        data:
          message: Toilets need cleaning
          title: Job Job Job
      - service: notify.mobile_app_samsung_galaxy_s22_ultra
        metadata: {}
        data:
          title: Toilets need cleaning
          message: Toilets need cleaning
      rolling_completion: false
- id: '1713092115962'
  alias: Nightly Garage Door Check
  description: ''
  trigger:
  - platform: state
    entity_id:
    - cover.garage_door_msg100_main_channel
    to: opening
  condition:
  - condition: state
    entity_id: input_boolean.garage_door_notify
    state: 'on'
  action:
  - data:
      message: 'Garage Door open for {{ relative_time(states.binary_sensor.garage_door_alert_active.last_changed)
        }} \   Alerts on: Alerts on: {{ states.cover | selectattr(''entity_id'', ''eq'',
        ''cover.smart_garage_door_garage'') | selectattr(''state'', ''eq'', ''on'')
        | map(attribute=''attributes.friendly_name'') | list | join('', '') }} \  Triggered:
        {{ as_timestamp(states.binary_sensor.garage_door_alert_active.last_changed)
        | timestamp_custom(''%A %I:%M%p (%d-%b-%Y)'') }}

        '
      title: 7580 Info - Garage Door Open
    action: notify.STD_Information
  mode: single
- id: '1714294514007'
  alias: Otto air condioner at night
  description: If it's too hot or cold at night make sure the heater is on or off.
    Winter automation.
  trigger:
  - platform: numeric_state
    entity_id:
    - sensor.study_esp32_ottosroom_temperature
    for:
      hours: 0
      minutes: 10
      seconds: 0
    above: 18.75
    id: Hot
  - platform: numeric_state
    entity_id:
    - sensor.study_esp32_ottosroom_temperature
    for:
      hours: 0
      minutes: 10
      seconds: 0
    below: 18.2
    id: Cold
  condition:
  - condition: time
    after: '18:00:00'
    before: 06:00:00
    weekday:
    - sun
    - mon
    - tue
    - wed
    - thu
    - fri
    - sat
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.occupancy
      state: Home
    - condition: state
      entity_id: input_select.occupancy
      state: Sleeping
    - condition: state
      entity_id: input_select.occupancy
      state: Guest
  - condition: not
    conditions:
    - condition: state
      entity_id: input_select.occupancy
      state: Holiday
  action:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - Hot
      sequence:
      - metadata: {}
        data:
          preset_mode: 'Off'
        target:
          entity_id: climate.otto_s_room
        enabled: false
        action: climate.set_preset_mode
      - metadata: {}
        data:
          hvac_mode: 'off'
        target:
          entity_id: climate.otto_s_room
        action: climate.set_hvac_mode
    - conditions:
      - condition: trigger
        id:
        - Cold
      sequence:
      - metadata: {}
        data:
          preset_mode: eco
        target:
          entity_id: climate.otto_s_room
        action: climate.set_preset_mode
      - metadata: {}
        data:
          hvac_mode: heat
        target:
          entity_id: climate.otto_s_room
        action: climate.set_hvac_mode
  mode: single
- id: '1714337117111'
  alias: Master AC off when wake up
  description: ''
  trigger:
  - type: value
    platform: device
    device_id: c054264b79e6739a057236f3a3c512b4
    entity_id: sensor.samsung_galaxy_s22_ultra_sleep_confidence
    domain: sensor
    below: 80
  - type: value
    platform: device
    device_id: 58e2eb1fec0eb5ec9ce450433d074fcf
    entity_id: sensor.slvdh_floors_descended
    domain: sensor
    above: 1
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.occupancy
      state: Home
    - condition: state
      entity_id: input_select.occupancy
      state: Sleeping
    - condition: state
      entity_id: input_select.occupancy
      state: Guest
    alias: Someone Home
  - condition: time
    after: 06:00:00
    before: 09:00:00
  action:
  - service: climate.set_hvac_mode
    metadata: {}
    data:
      hvac_mode: 'off'
    target:
      entity_id: climate.masterbed_versatile_thermostate
  - service: fan.turn_off
    metadata: {}
    data: {}
    target:
      entity_id: fan.masterbedroom_fan
  mode: single
- id: '1714349672273'
  alias: Heater on in Living Room daytime
  description: Turn on the heater if it's too cold or hot during the daytime
  trigger:
  - platform: numeric_state
    entity_id:
    - sensor.ble_temperature_kitchen_temp_humidity_sensor
    for:
      hours: 0
      minutes: 10
      seconds: 0
    below: 18.5
    id: Cold
  - platform: numeric_state
    entity_id:
    - sensor.ble_temperature_kitchen_temp_humidity_sensor
    for:
      hours: 0
      minutes: 10
      seconds: 0
    id: Hot
    above: 21.5
  condition:
  - condition: state
    entity_id: automation.presence
    state: 'on'
  - condition: time
    after: 09:30:00
    before: '15:00:00'
    weekday:
    - sat
    - fri
    - thu
    - wed
    - tue
    - mon
    - sun
  action:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - Cold
      sequence:
      - service: climate.set_preset_mode
        target:
          entity_id:
          - climate.living_room_versatile_thermastat
        data:
          preset_mode: Comfort
      - service: climate.set_hvac_mode
        metadata: {}
        data:
          hvac_mode: heat
        target:
          entity_id: climate.living_room_versatile_thermastat
    - conditions:
      - condition: trigger
        id:
        - Hot
      sequence:
      - service: climate.set_hvac_mode
        metadata: {}
        data:
          hvac_mode: 'off'
        target:
          entity_id: climate.living_room_versatile_thermastat
  mode: single
- id: '1714895967504'
  alias: Hot in masterbed
  description: Turn on the fan and lower the blinds
  trigger:
  - platform: numeric_state
    entity_id:
    - sensor.ble_temperature_masterbed_temp_humidity_sensor
    above: 22
  condition:
  - condition: sun
    before: sunset
    after: sunrise
  action:
  - service: fan.turn_on
    metadata: {}
    data: {}
    target:
      entity_id: fan.masterbedroom_fan
  - service: script.1693262268843
    metadata: {}
    data: {}
  mode: single
- id: '1716152338300'
  alias: Disarm Alarm If Someone Up
  description: Disarm alarm if someone is up based on their mobile phone getting up
  trigger:
  - type: value
    platform: device
    device_id: c054264b79e6739a057236f3a3c512b4
    entity_id: sensor.samsung_galaxy_s22_ultra_sleep_confidence
    domain: sensor
    below: 80
  - type: value
    platform: device
    device_id: 58e2eb1fec0eb5ec9ce450433d074fcf
    entity_id: sensor.slvdh_floors_descended
    domain: sensor
    above: 1
  - platform: time
    at: 07:00:00
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.occupancy
      state: Home
    - condition: state
      entity_id: input_select.occupancy
      state: Sleeping
    - condition: state
      entity_id: input_select.occupancy
      state: Guest
    alias: Someone Home
  - condition: state
    entity_id: alarm_control_panel.alarmo
    state: armed_night
  action:
  - service: alarmo.disarm
    metadata: {}
    data:
      entity_id: alarm_control_panel.alarmo
  mode: single
- id: '1716294481179'
  alias: Masterbed Heater on at night
  description: If it's too hot or cold at night make sure the heater is on or off.
    Winter automation.
  trigger:
  - platform: numeric_state
    entity_id:
    - sensor.ble_temperature_masterbed_temp_humidity_sensor
    for:
      hours: 0
      minutes: 10
      seconds: 0
    above: 18.2
    id: Hot
  - platform: numeric_state
    entity_id:
    - sensor.ble_temperature_masterbed_temp_humidity_sensor
    for:
      hours: 0
      minutes: 10
      seconds: 0
    below: 17.8
    id: Cold
  condition:
  - condition: time
    after: '18:00:00'
    before: 06:00:00
    weekday:
    - sun
    - mon
    - tue
    - wed
    - thu
    - fri
    - sat
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.occupancy
      state: Home
    - condition: state
      entity_id: input_select.occupancy
      state: Sleeping
    - condition: state
      entity_id: input_select.occupancy
      state: Guest
  - condition: not
    conditions:
    - condition: state
      entity_id: input_select.occupancy
      state: Holiday
  action:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - Hot
      sequence:
      - metadata: {}
        data:
          hvac_mode: 'off'
        target:
          entity_id:
          - climate.masterbed_versatile_thermostate
        action: climate.set_hvac_mode
    - conditions:
      - condition: trigger
        id:
        - Cold
      sequence:
      - metadata: {}
        data:
          preset_mode: eco
        target:
          entity_id: climate.masterbed_versatile_thermostate
        action: climate.set_preset_mode
      - metadata: {}
        data:
          hvac_mode: heat
        target:
          entity_id: climate.masterbed_versatile_thermostate
        action: climate.set_hvac_mode
  mode: single
- id: '1716712023665'
  alias: Henry Daytime Work heater
  description: If it's too hot or cold during the office hours make sure the heater
    is on or off. Winter automation.
  trigger:
  - platform: numeric_state
    entity_id:
    - sensor.study_esp32_henrysroom_temperature
    for:
      hours: 0
      minutes: 10
      seconds: 0
    above: 21.5
    id: Hot
  - platform: numeric_state
    entity_id:
    - sensor.study_esp32_henrysroom_temperature
    for:
      hours: 0
      minutes: 10
      seconds: 0
    below: 19.1
    id: Cold
  condition:
  - condition: time
    after: 07:30:00
    before: '18:00:00'
    weekday:
    - mon
    - tue
    - wed
    - thu
    - fri
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.occupancy
      state: Home
    - condition: state
      entity_id: input_select.occupancy
      state: Sleeping
    - condition: state
      entity_id: input_select.occupancy
      state: Guest
  - condition: not
    conditions:
    - condition: state
      entity_id: input_select.occupancy
      state: Holiday
  - condition: state
    entity_id: device_tracker.study_desktop
    state: home
  action:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - Hot
      sequence:
      - service: climate.set_hvac_mode
        metadata: {}
        data:
          hvac_mode: 'off'
        target:
          entity_id: climate.henry_s_room_versatile_thermostat
    - conditions:
      - condition: trigger
        id:
        - Cold
      sequence:
      - service: climate.set_preset_mode
        metadata: {}
        data:
          preset_mode: eco
        target:
          entity_id: climate.henry_s_room_versatile_thermostat
      - service: climate.set_hvac_mode
        metadata: {}
        data:
          hvac_mode: heat
        target:
          entity_id: climate.henry_s_room_versatile_thermostat
  mode: single
- id: '1718513507860'
  alias: Amp & Backlight on/off
  description: 'When the living room TV is toggled on/off, turn on the amplifier and
    TV backlights if it is after sundown.

    '
  trigger:
  - platform: state
    entity_id: remote.sony_kd_55x8500c
    from: 'off'
    to: 'on'
    id: tv_on
  - platform: state
    entity_id: remote.sony_kd_55x8500c
    from: 'on'
    to: 'off'
    id: tv_off
  - platform: sun
    event: sunset
    offset: 0
  - platform: state
    entity_id: remote.sony_kd_55x8500c
    to: unavailable
    id: tv_unavailable
  condition: []
  action:
  - alias: Amp and backlight on/off
    choose:
    - conditions:
      - condition: trigger
        id: tv_on
      sequence:
      - action: switch.turn_on
        target:
          entity_id:
          - switch.amplifier_socket_1
        data: {}
      - condition: sun
        after: sunset
        before: sunrise
      - action: light.turn_on
        target:
          entity_id: light.tv_backlight
        data: {}
    - conditions:
      - condition: trigger
        id: tv_off
      sequence:
      - action: switch.turn_off
        target:
          entity_id:
          - switch.amplifier_socket_1
        data: {}
      - action: light.turn_off
        target:
          entity_id: light.tv_backlight
        data: {}
    - conditions:
      - condition: trigger
        id: tv_unavailable
      sequence:
      - action: switch.turn_off
        target:
          entity_id:
          - switch.amplifier_socket_1
        data: {}
      - action: light.turn_off
        target:
          entity_id: light.tv_backlight
        data: {}
  mode: single
- id: '1721440736884'
  alias: Blanket on reminder
  description: Remind every 30 minutes if the blanket is on
  trigger:
  - platform: state
    entity_id:
    - switch.blanket_smart_plug_socket_1
    to: 'on'
    for:
      minutes: 30
  condition:
  - condition: device
    type: is_on
    device_id: 71a70a1b4f966e3f97a2168d18d29a14
    entity_id: 20475efa0446e26eada83773dc59101b
    domain: switch
  action:
  - service: notify.mobile_app_samsung_galaxy_s22_ultra
    data:
      message: 'Reminder: The electric blanket has been on for another 30 minutes.'
      title: Electric Blanket Reminder
  - service: notify.mobile_app_slvdh
    data:
      message: 'Reminder: The electric blanket has been on for another 30 minutes.'
      title: 'Electric Blanket '
  mode: single
- id: '1721641437270'
  alias: Periodic Roller Blind Position Update
  description: ''
  trigger:
  - platform: time_pattern
    seconds: /4
  condition:
  - condition: state
    entity_id: timer.roller_blind_timer
    state: active
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: cover.roller_blinds_chan1
        state: opening
      sequence:
      - service: input_number.set_value
        data_template:
          entity_id: input_number.roller_blind_position
          value: '{{ [states(''input_number.roller_blind_position'')|int + (100 /
            4), 100] | min }}

            '
    - conditions:
      - condition: state
        entity_id: cover.roller_blinds_chan1
        state: closing
      sequence:
      - service: input_number.set_value
        data_template:
          entity_id: input_number.roller_blind_position
          value: '{{ [states(''input_number.roller_blind_position'')|int - (100 /
            4), 0] | max }}

            '
- id: '1721641629896'
  alias: Correct Roller Blind State On Reset
  description: ''
  trigger: []
  condition: []
  action: []
  mode: single
- id: '1723799786022'
  alias: Close Master Blinds and Curtains If Hot
  description: Tries to keep masterbed cool on hot days
  trigger:
  - platform: time
    at: input_datetime.wakeup_time_phil_steph
  condition: []
  action:
  - alias: Blinds closed if hot
    choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.super_hot_today
        state: 'on'
      sequence:
      - action: cover.close_cover
        metadata: {}
        data: {}
        target:
          entity_id:
          - cover.roller_blinds_chan1
          - cover.windowcovering_cover
      alias: Superhot
    - conditions:
      - condition: and
        conditions:
        - condition: state
          entity_id: input_boolean.hot_today_flag
          state: 'on'
        - condition: state
          entity_id: input_boolean.super_hot_today
          state: 'off'
      sequence:
      - action: cover.set_cover_position
        target:
          entity_id:
          - cover.windowcovering_cover
        data:
          position: 50
      alias: Hot
    - conditions:
      - condition: and
        conditions:
        - condition: state
          entity_id: input_boolean.hot_today_flag
          state: 'off'
        - condition: state
          entity_id: input_boolean.super_hot_today
          state: 'off'
      sequence:
      - action: cover.open_cover
        metadata: {}
        data: {}
        target:
          entity_id:
          - cover.roller_blinds_chan1
          - cover.windowcovering_cover
      alias: Not Hot
  mode: single
- id: '1724061115527'
  alias: Study Heater on at night
  description: If it's too hot or cold at night make sure the heater is on or off.
    Winter automation.
  trigger:
  - platform: numeric_state
    entity_id:
    - sensor.study_esp32_henrysroom_temperature
    for:
      hours: 0
      minutes: 10
      seconds: 0
    above: 19.7
    id: Hot
  - platform: numeric_state
    entity_id:
    - sensor.study_esp32_henrysroom_temperature
    for:
      hours: 0
      minutes: 10
      seconds: 0
    below: 19.2
    id: Cold
  condition:
  - condition: time
    after: '18:00:00'
    before: 06:00:00
    weekday:
    - sun
    - mon
    - tue
    - wed
    - thu
    - fri
    - sat
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.occupancy
      state: Home
    - condition: state
      entity_id: input_select.occupancy
      state: Sleeping
    - condition: state
      entity_id: input_select.occupancy
      state: Guest
  - condition: not
    conditions:
    - condition: state
      entity_id: input_select.occupancy
      state: Holiday
  action:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - Hot
      sequence:
      - metadata: {}
        data:
          preset_mode: 'Off'
        target:
          entity_id: climate.otto_s_room
        enabled: false
        action: climate.set_preset_mode
      - metadata: {}
        data:
          hvac_mode: 'off'
        action: climate.set_hvac_mode
        target:
          entity_id: climate.henry_s_room_versatile_thermostat
    - conditions:
      - condition: trigger
        id:
        - Cold
      sequence:
      - metadata: {}
        data:
          preset_mode: eco
        action: climate.set_preset_mode
        target:
          entity_id: climate.henry_s_room_versatile_thermostat
      - metadata: {}
        data:
          hvac_mode: heat
        action: climate.set_hvac_mode
        target:
          entity_id: climate.henry_s_room_versatile_thermostat
  mode: single
- id: '1724224516271'
  alias: Cover Control Automation (CCA)
  description: Balcony Roller Blinds cover automation - tests
  use_blueprint:
    path: hvorragend/cover_control_automation.yaml
    input:
      blind: cover.roller_blinds_chan1
      auto_options:
      - auto_up_enabled
      - auto_down_enabled
      - auto_brightness_enabled
      - auto_sun_enabled
      - auto_lockout_protection_enabled
      cover_status_options: cover_helper_disabled
      ignore_after_manual_config:
      - ignore_closing_after_manual
      contact_sensor_lockout: binary_sensor.balcony_door_sensor_magnet_opening_2
- id: '1724225427107'
  alias: Masters are Sleeping
  description: Adjusts the boolean to true if both devices are sleeping, otherwise
    false.
  trigger:
  - platform: numeric_state
    entity_id:
    - sensor.samsung_galaxy_s22_ultra_sleep_confidence
    above: 85
    for:
      minutes: 15
    id: Phil Sleeping
  - platform: numeric_state
    entity_id:
    - sensor.samsung_galaxy_s22_ultra_sleep_confidence
    below: 85
    id: Phil Not Sleeping
  - platform: numeric_state
    entity_id:
    - sensor.slvdh_battery_level
    for:
      minutes: 15
    above: 80
    id: Steph Sleeping
  - platform: numeric_state
    entity_id:
    - sensor.slvdh_floors_ascended
    above: 1
    enabled: false
  - platform: state
    entity_id:
    - sensor.slvdh_battery_state
    to: Charging
    enabled: false
  - platform: numeric_state
    entity_id:
    - sensor.slvdh_battery_level
    below: 90
    for:
      minutes: 15
    id: Steph Not Sleeping
  condition: []
  action:
  - choose:
    - conditions:
      - condition: numeric_state
        entity_id: sensor.samsung_galaxy_s22_ultra_sleep_confidence
        above: 85
      - condition: numeric_state
        entity_id: sensor.slvdh_battery_level
        above: 80
      sequence:
      - target:
          entity_id: input_boolean.masterbed_sleeping
        action: input_boolean.turn_on
        data: {}
    - conditions: []
      sequence:
      - target:
          entity_id: input_boolean.masterbed_sleeping
        action: input_boolean.turn_off
        data: {}
  mode: single
