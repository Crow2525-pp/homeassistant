- id: '1643422150691'
  alias: Turn off all devices
  description: ''
  trigger:
  - platform: device
    device_id: 3c11ea2cdc99cd0aaef7e25d6dc7d5a8
    domain: homekit_controller
    type: button1
    subtype: long_press
  condition: []
  action:
  - type: turn_off
    device_id: a4c9fa6c4205ff2778142853b379e0c5
    entity_id: remote.sony_kd_55x8500c
    domain: remote
  - service: scene.turn_on
    target:
      entity_id: scene.all_lights_off
    metadata: {}
  - service: climate.set_hvac_mode
    data:
      hvac_mode: 'off'
    target:
      entity_id:
      - climate.living_room_ac
      - climate.masterbed_ac
      - climate.otto_s_ac
      - climate.study_ac
  mode: single
- id: '1644318707340'
  alias: 'Close Blinds > 22 Degrees '
  description: During hot daylight hours only
  trigger:
  - platform: time_pattern
    minutes: '15'
  - platform: time_pattern
    minutes: '30'
  - platform: time_pattern
    minutes: '45'
  condition:
  - condition: and
    conditions:
    - type: is_temperature
      condition: device
      device_id: 9904a0122b1c1edc01e954d58c97e826
      entity_id: sensor.ble_temperature_masterbedroomsensor
      domain: sensor
      above: 22
    - condition: time
      after: 09:00:00
      before: '20:00:00'
    - type: is_not_open
      condition: device
      device_id: d5f7f632943251f64c4dedc486906b17
      entity_id: binary_sensor.contact_sensor_2
      domain: binary_sensor
  action:
  - service: remote.send_command
    data:
      device: Roller Blinds
      command: Down
    target:
      device_id: 3d7542325305f19a1d70e5b14947b2a9
  mode: single
- id: '1644318832858'
  alias: Turn on MastBed AC If > 22 Degrees
  description: ''
  trigger:
  - platform: time
    at: '21:30:00'
  condition:
  - type: is_temperature
    condition: device
    device_id: 9904a0122b1c1edc01e954d58c97e826
    entity_id: sensor.ble_temperature_masterbedroomsensor
    domain: sensor
    above: 22
  action:
  - service: remote.send_command
    data:
      device: Air Conditioner
      command: 18 Cool
    target:
      device_id: 3d7542325305f19a1d70e5b14947b2a9
  - device_id: a781a1492a6345b21deb70c136d2bf9d
    domain: mobile_app
    type: notify
    message: MasterBedroom > 24 degrees
    title: AirCon activated at 18 degrees cold
  mode: single
- id: '1644393973167'
  alias: AC activate for kids Room at 530
  description: ''
  trigger:
  - platform: time
    at: '17:30:00'
  condition:
  - type: is_temperature
    condition: device
    device_id: 015e3a46da56611688fcae2c46660b8c
    entity_id: sensor.ble_temperature_ottosroomsensor
    domain: sensor
    above: 24
    enabled: true
  - condition: numeric_state
    entity_id: sensor.openweathermap_temperature
    attribute: attribution
    above: 18
    enabled: false
  action:
  - wait_for_trigger:
    - type: not_opened
      platform: device
      device_id: 09bf1990e8257ab0447bd135a8c802c5
      entity_id: binary_sensor.contact_sensor_window_and_door_sensor_2
      domain: binary_sensor
    continue_on_timeout: false
    timeout:
      hours: 0
      minutes: 0
      seconds: 0
      milliseconds: 0
  - service: climate.turn_on
    data: {}
    target:
      entity_id: climate.otto_s_ac
  - service: climate.set_hvac_mode
    data:
      hvac_mode: cool
    target:
      entity_id: climate.otto_s_ac
  - service: climate.set_temperature
    data:
      temperature: 20
      target_temp_high: 21
      target_temp_low: 19
      hvac_mode: cool
    target:
      entity_id: climate.otto_s_ac
  mode: single
- id: '1644398227874'
  alias: turn on lounge lights at 20 min before sunset
  description: ''
  trigger:
  - platform: numeric_state
    entity_id: sun.sun
    attribute: elevation
    below: '5'
  condition: []
  action:
  - service: scene.turn_on
    target:
      entity_id: scene.lights_on
    metadata: {}
  - service: homeassistant.turn_on
    data: {}
    target:
      entity_id: light.masterbed_lights
  - type: turn_on
    device_id: 18551c9b3c72efc901c3e35633c1e3c7
    entity_id: light.gld064ha
    domain: light
    brightness_pct: 100
    enabled: false
  - type: turn_on
    device_id: 3cf9c8bc5367cd26edc9b128e7303916
    entity_id: light.gld064ha_2
    domain: light
    brightness_pct: 100
    enabled: false
  mode: single
- id: '1644398278136'
  alias: lounge lights off at night
  description: ''
  trigger:
  - platform: time
    at: '22:15:00'
  - platform: calendar
    event: start
    offset: 0:0:0
    entity_id: calendar.early_to_bed
  condition: []
  action:
  - scene: scene.lounge_lights_off
  - type: turn_off
    device_id: a4c9fa6c4205ff2778142853b379e0c5
    entity_id: remote.sony_kd_55x8500c
    domain: remote
  - service: scene.turn_on
    target:
      entity_id: scene.all_lights_off
    metadata: {}
  - service: climate.turn_off
    data: {}
    target:
      entity_id: climate.living_room_ac
  - service: input_select.select_option
    data:
      option: Sleeping
    target:
      entity_id: input_select.occupancy
  mode: single
- id: '1644402690423'
  alias: Close blinds at night
  description: ''
  trigger:
  - platform: time
    at: '21:30:00'
  condition: []
  action:
  - service: remote.send_command
    data:
      device: Roller Blinds
      command: Down
    target:
      device_id: 3d7542325305f19a1d70e5b14947b2a9
  mode: single
- id: '1644437526740'
  alias: open blinds in the morning
  description: ''
  trigger:
  - platform: time
    at: 07:15:00
  - platform: device
    device_id: 06a0f27490d21ff84a09542304f9a7fd
    domain: select
    entity_id: select.bedroom_light_power_on_behavior
    type: current_option_changed
    to: power_on
    from: power_off
    for:
      hours: 0
      minutes: 3
      seconds: 0
  - platform: device
    device_id: 2746a39974bcf5a4d3b9c1844699fb84
    domain: select
    entity_id: select.bedroom_light_2_power_on_behavior
    type: current_option_changed
    to: power_on
    from: power_off
    for:
      hours: 0
      minutes: 3
      seconds: 0
  condition:
  - condition: numeric_state
    entity_id: weather.home
    attribute: temperature
    below: 25
  action:
  - service: remote.send_command
    data:
      device: Roller Blinds
      command: Up
    target:
      device_id: 3d7542325305f19a1d70e5b14947b2a9
  mode: single
- id: '1644489431071'
  alias: Turn off aircons after 1
  description: if temp <20.5
  trigger:
  - platform: time_pattern
    minutes: '30'
  condition:
  - type: is_temperature
    condition: device
    device_id: 9904a0122b1c1edc01e954d58c97e826
    entity_id: sensor.ble_temperature_a4c138c67989
    domain: sensor
    below: 19
  - type: is_temperature
    condition: device
    device_id: 015e3a46da56611688fcae2c46660b8c
    entity_id: sensor.ble_temperature_a4c138f1205c
    domain: sensor
    below: 19
  - condition: time
    after: 01:00:00
    before: 07:00:00
  action:
  - service: remote.send_command
    data:
      device: Air Conditioner
      command: 'Off'
    target:
      device_id:
      - 3d7542325305f19a1d70e5b14947b2a9
      - 092c1d119ebcc75358f8461a097277a0
  mode: single
- id: '1644554320485'
  alias: Open Blinds < 22 degrees
  description: ''
  trigger:
  - platform: time_pattern
    minutes: '15'
  condition:
  - condition: and
    conditions:
    - condition: time
      after: 09:00:00
      before: '18:00:00'
    - type: is_not_open
      condition: device
      device_id: 11ce7239a1fb356f1942f5b496a4c7d1
      entity_id: binary_sensor.livingroomdoorsensor_3
      domain: binary_sensor
    - condition: state
      entity_id: binary_sensor.masterbed_blind_temperature
      attribute: lower
      state: 'true'
      for:
        hours: 0
        minutes: 0
        seconds: 0
    - condition: state
      entity_id: climate.masterbed_ac
      attribute: last_on_operation
      state: ''
  action:
  - service: remote.send_command
    data:
      device: Roller Blinds
      command: Up
    target:
      device_id: 3d7542325305f19a1d70e5b14947b2a9
  mode: single
- id: '1644579386119'
  alias: open blinds at 6pm
  description: ''
  trigger:
  - platform: time
    at: '18:00:00'
  condition: []
  action:
  - service: script.roller_blinds_up
    data: {}
  mode: single
- id: '1644649339879'
  alias: Turn on Otto's room AC at 6 if hot
  description: ''
  trigger:
  - platform: time
    at: '18:50:00'
  condition:
  - type: is_temperature
    condition: device
    device_id: 015e3a46da56611688fcae2c46660b8c
    entity_id: sensor.ble_temperature_ottosroomsensor
    domain: sensor
    above: 20
  action:
  - service: script.20_cool_2
    data: {}
  mode: single
- id: '1645805599315'
  alias: quiet google home
  description: ''
  trigger:
  - platform: time
    at: '22:00:00'
  condition: []
  action:
  - service: remote.send_command
    data: {}
    target:
      device_id: a4c9fa6c4205ff2778142853b379e0c5
  mode: single
- id: '1647520935523'
  alias: Camera test driveway
  description: ''
  trigger:
  - type: motion
    platform: device
    device_id: 4cadedd6aad3623038c4725e3f43188f
    entity_id: binary_sensor.driveway_cam_motion
    domain: binary_sensor
  condition: []
  action:
  - service: media_player.play_media
    target:
      entity_id: media_player.kitchen
    data:
      media_content_id: media-source://camera/camera.driveway_cam
      media_content_type: application/vnd.apple.mpegurl
    metadata:
      title: Driveway Cam
      thumbnail: /api/camera_proxy/camera.driveway_cam
      media_class: video
      children_media_class:
      navigateIds:
      - {}
      - media_content_type: app
        media_content_id: media-source://camera
  mode: single
- id: '1647521016663'
  alias: Camera test door
  description: ''
  trigger:
  - type: motion
    platform: device
    device_id: 92ce4d5d5c029a9e37a00e2bf4573f3c
    entity_id: binary_sensor.bi_door_camera_motion
    domain: binary_sensor
  condition: []
  action:
  - service: media_player.play_media
    target:
      entity_id: media_player.kitchen
    data:
      media_content_id: media-source://camera/camera.bi_door_camera
      media_content_type: image/jpeg
    metadata:
      title: BI Door Camera
      thumbnail: /api/camera_proxy/camera.bi_door_camera
      media_class: video
      children_media_class:
      navigateIds:
      - {}
      - media_content_type: app
        media_content_id: media-source://camera
  mode: single
- id: '1648979867608'
  alias: Send a camera snapshot when motion is detected - phil
  description: ''
  use_blueprint:
    path: vorion/send-camera-snapshot-notification-on-motion.yaml
    input:
      motion_sensor: binary_sensor.front_door_cam_motion
      camera: camera.front_door_cam
      notify_device: c054264b79e6739a057236f3a3c512b4
      delay: 1
- id: '1649108238334'
  alias: Txt steph on way home
  description: ''
  trigger:
  - platform: zone
    entity_id: person.phil_patterson
    zone: zone.work
    event: leave
  condition: []
  action:
  - service: notify.mobile_app_slvdh
    data:
      message: Phil is leaving work area now
      title: Phil leaves work
  mode: single
- id: '1649147714100'
  alias: Phil/steph home open garage
  description: ''
  trigger:
  - platform: device
    device_id: c054264b79e6739a057236f3a3c512b4
    domain: device_tracker
    entity_id: device_tracker.sm_s908e
    type: enters
    zone: zone.home
  - platform: device
    device_id: 58e2eb1fec0eb5ec9ce450433d074fcf
    domain: device_tracker
    entity_id: device_tracker.slvdh_2
    type: enters
    zone: zone.home
  condition: []
  action:
  - device_id: 7edad8ef01a718694f8a423cbfdca0c0
    domain: cover
    entity_id: cover.smart_garage_door_2109186329349036102048e1e9775929_garage
    type: open
  mode: single
- id: '1649148675412'
  alias: Lights on am
  description: ''
  trigger:
  - type: value
    platform: device
    device_id: c054264b79e6739a057236f3a3c512b4
    entity_id: sensor.phils_phone_sleep_confidence
    domain: sensor
    below: 1
  condition:
  - condition: sun
    before: sunrise
  action:
  - service: scene.turn_on
    target:
      entity_id: scene.lights_on
    metadata: {}
  mode: single
- id: '1649452362309'
  alias: Lights off am
  description: ''
  trigger:
  - platform: numeric_state
    entity_id: sun.sun
    attribute: elevation
    above: -15
  condition: []
  action:
  - service: scene.turn_on
    target:
      entity_id: scene.lounge_lights_off
    metadata: {}
  mode: single
- id: '1650681088037'
  alias: Door open at night
  description: ''
  trigger:
  - type: opened
    platform: device
    device_id: a8a15a27fe4c0ce7fa4d3cccacb87e17
    entity_id: binary_sensor.frontdoordoorsensor
    domain: binary_sensor
  - type: opened
    platform: device
    device_id: 11ce7239a1fb356f1942f5b496a4c7d1
    entity_id: binary_sensor.livingroomdoorsensor_3
    domain: binary_sensor
  - type: opened
    platform: device
    device_id: 1d3b8c35409f5ce6436eafbb92b368dc
    entity_id: binary_sensor.garagedoorsensor
    domain: binary_sensor
  condition:
  - condition: not
    conditions:
    - condition: zone
      entity_id: person.phil_patterson
      zone: zone.home
    - condition: or
      conditions:
      - condition: not
        conditions:
        - condition: zone
          entity_id: person.stephanie_patterson
          zone: zone.home
        - condition: and
          conditions:
          - condition: time
            before: 06:00:00
            after: '21:00:00'
  action:
  - service: notify.mobile_app_phils_phone
    data:
      message: A door is open
      title: Alarm triggered
  mode: single
- id: '1651441064042'
  alias: Blinds closed if hot today
  description: ''
  trigger:
  - platform: time
    at: 07:45:00
  condition:
  - condition: not
    conditions:
    - type: is_not_open
      condition: device
      device_id: d5f7f632943251f64c4dedc486906b17
      entity_id: binary_sensor.contact_sensor_2
      domain: binary_sensor
    alias: Ensure doors are closed
  - condition: numeric_state
    entity_id: weather.home
    attribute: forecast
    above: '21'
  action:
  - service: script.roller_blinds_down
    data: {}
  mode: single
- id: '1651441132086'
  alias: Button press
  description: ''
  trigger:
  - platform: device
    device_id: 3c11ea2cdc99cd0aaef7e25d6dc7d5a8
    domain: homekit_controller
    type: button1
    subtype: single_press
  condition: []
  action:
  - service: scene.turn_on
    target:
      entity_id: scene.lights_on
    metadata: {}
  mode: single
- id: '1651912365974'
  alias: Any doors open at 930?
  description: ''
  trigger:
  - platform: time
    at: '21:30:00'
  condition:
  - condition: or
    conditions:
    - type: is_open
      condition: device
      device_id: a8a15a27fe4c0ce7fa4d3cccacb87e17
      entity_id: binary_sensor.frontdoordoorsensor
      domain: binary_sensor
    - type: is_open
      condition: device
      device_id: 1d3b8c35409f5ce6436eafbb92b368dc
      entity_id: binary_sensor.garagedoorsensor
      domain: binary_sensor
    - type: is_open
      condition: device
      device_id: 11ce7239a1fb356f1942f5b496a4c7d1
      entity_id: binary_sensor.livingroomdoorsensor_3
      domain: binary_sensor
    - type: is_open
      condition: device
      device_id: d5f7f632943251f64c4dedc486906b17
      entity_id: binary_sensor.contact_sensor_2
      domain: binary_sensor
  action:
  - service: notify.mobile_app_phils_phone
    data:
      message: A door is left open
  mode: single
- id: '1655553099715'
  alias: Amp & Backlight on/off
  description: When livingroom tv toggled on/off, turn on the amplifier and tv backlights
    if it is after sundown
  trigger:
  - platform: device
    type: changed_states
    device_id: a4c9fa6c4205ff2778142853b379e0c5
    entity_id: remote.sony_kd_55x8500c
    domain: remote
  condition: []
  action:
  - choose:
    - conditions:
      - condition: device
        type: is_on
        device_id: a4c9fa6c4205ff2778142853b379e0c5
        entity_id: remote.sony_kd_55x8500c
        domain: remote
      sequence:
      - type: turn_on
        device_id: eda310c53d64fbfed9908fd266dc8635
        entity_id: switch.amplifier_socket_1
        domain: switch
      - choose:
        - conditions:
          - condition: numeric_state
            entity_id: sun.sun
            attribute: elevation
            below: 5
            enabled: true
          sequence:
          - service: script.tv_lights_on
            data: {}
        alias: Turn on tv backlights if sundown
      - service: switch.turn_on
        data: {}
        target:
          entity_id: switch.kitchen_switch_socket_1
    - conditions:
      - condition: device
        type: is_off
        device_id: a4c9fa6c4205ff2778142853b379e0c5
        entity_id: remote.sony_kd_55x8500c
        domain: remote
      sequence:
      - type: turn_off
        device_id: eda310c53d64fbfed9908fd266dc8635
        entity_id: switch.amplifier_socket_1
        domain: switch
      - service: script.tv_lights_off
        data: {}
    alias: Amp and backlight on/off
  mode: single
- id: '1655607456252'
  alias: Dim the lights at 8pm
  description: ''
  trigger:
  - platform: time
    at: '20:00:00'
  condition:
  - condition: or
    conditions:
    - condition: device
      type: is_on
      device_id: 18551c9b3c72efc901c3e35633c1e3c7
      entity_id: light.gld064ha
      domain: light
    - condition: device
      type: is_on
      device_id: 3cf9c8bc5367cd26edc9b128e7303916
      entity_id: light.gld064ha_2
      domain: light
  action:
  - service: scene.turn_on
    target:
      entity_id: scene.master_bedroom_dimming
    metadata: {}
  mode: single
- id: '1657702278131'
  alias: Dimmed Master bedroom lights
  description: ''
  trigger:
  - platform: device
    type: changed_states
    device_id: 18551c9b3c72efc901c3e35633c1e3c7
    entity_id: light.gld064ha
    domain: light
  - platform: device
    type: changed_states
    device_id: 3cf9c8bc5367cd26edc9b128e7303916
    entity_id: light.gld064ha_2
    domain: light
  condition:
  - condition: sun
    before: sunrise
    after: sunrise
    after_offset: '120'
  action:
  - service: scene.turn_on
    target:
      entity_id: scene.master_bedroom_dimming
    metadata: {}
  mode: single
- id: '1662634152654'
  alias: 'Master bedroom lights 1% brightness '
  description: Between 8pm-8am lights are low brightness
  trigger:
  - platform: device
    type: turned_on
    device_id: 18551c9b3c72efc901c3e35633c1e3c7
    entity_id: light.gld064ha
    domain: light
  - platform: device
    type: turned_on
    device_id: 3cf9c8bc5367cd26edc9b128e7303916
    entity_id: light.gld064ha_2
    domain: light
  condition:
  - condition: time
    before: 08:00:00
    after: '20:00:00'
  action:
  - choose:
    - conditions:
      - condition: device
        type: is_on
        device_id: 18551c9b3c72efc901c3e35633c1e3c7
        entity_id: light.gld064ha
        domain: light
      sequence:
      - type: turn_on
        device_id: 18551c9b3c72efc901c3e35633c1e3c7
        entity_id: light.gld064ha
        domain: light
        brightness_pct: 1
        alias: 1% reading light
    - conditions:
      - condition: device
        type: is_on
        device_id: 3cf9c8bc5367cd26edc9b128e7303916
        entity_id: light.gld064ha_2
        domain: light
      sequence:
      - type: turn_on
        device_id: 3cf9c8bc5367cd26edc9b128e7303916
        entity_id: light.gld064ha_2
        domain: light
        brightness_pct: 1
        alias: 1% reading light
    alias: Check which light is on and turn it to 1%
  mode: single
- id: '1662706834110'
  alias: 'Livingroom Thermostat '
  description: ''
  trigger:
  - type: temperature
    platform: device
    device_id: ebf0379e33b2ccccd4ee6b6c351f4ce5
    entity_id: sensor.ble_temperature_kitchensensor
    domain: sensor
    for:
      hours: 0
      minutes: 2
      seconds: 0
    above: 19.5
  - type: temperature
    platform: device
    device_id: ebf0379e33b2ccccd4ee6b6c351f4ce5
    entity_id: sensor.ble_temperature_kitchensensor
    domain: sensor
    below: 17
    for:
      hours: 0
      minutes: 2
      seconds: 0
  condition:
  - condition: state
    entity_id: input_boolean.thermostat_on_off
    state: 'on'
  - condition: not
    conditions:
    - condition: state
      entity_id: zone.home
      attribute: persons
      state: '0'
      for:
        hours: 0
        minutes: 0
        seconds: 0
    alias: Someone must be home
  action:
  - choose:
    - conditions:
      - condition: or
        conditions:
        - condition: state
          entity_id: binary_sensor.livingroomdoorsensor_3
          state: 'on'
          for:
            hours: 0
            minutes: 2
            seconds: 0
        - condition: state
          entity_id: binary_sensor.frontdoordoorsensor
          state: 'on'
          for:
            hours: 0
            minutes: 2
            seconds: 0
      sequence:
      - service: climate.turn_off
        data: {}
        target:
          entity_id: climate.living_room_ac
    alias: If doors are open, turn off
  - choose:
    - conditions:
      - type: is_temperature
        condition: device
        device_id: ebf0379e33b2ccccd4ee6b6c351f4ce5
        entity_id: sensor.ble_temperature_kitchensensor
        domain: sensor
        above: 19.5
      sequence:
      - service: climate.turn_off
        data: {}
        target:
          entity_id: climate.living_room_ac
    - conditions:
      - type: is_temperature
        condition: device
        device_id: ebf0379e33b2ccccd4ee6b6c351f4ce5
        entity_id: sensor.ble_temperature_kitchensensor
        domain: sensor
        below: 17
      sequence:
      - service: climate.set_temperature
        data:
          temperature: 18
          target_temp_high: 17
          target_temp_low: 15
          hvac_mode: heat
        target:
          entity_id: climate.living_room_ac
    alias: Turn on or Off Living Room HVAC if too hot or too cold
  mode: single
- id: '1662761539613'
  alias: Occupancy State from Sleep to Home
  description: At sunrise
  trigger:
  - platform: sun
    event: sunrise
    offset: 0
  - platform: time
    at: 06:00:00
  - type: value
    platform: device
    device_id: c054264b79e6739a057236f3a3c512b4
    entity_id: sensor.samsung_galaxy_s22_ultra_sleep_confidence
    domain: sensor
    above: 99
  condition: []
  action:
  - type: turn_off
    device_id: 399b754fdf1cb07ed6c2bfcf22f86dce
    entity_id: light.study_light
    domain: light
    enabled: false
  - choose:
    - conditions:
      - condition: state
        entity_id: input_select.occupancy
        state: Sleeping
      sequence:
      - service: input_select.select_option
        data:
          option: Home
        target:
          entity_id: input_select.occupancy
  mode: single
- id: '1662848629328'
  alias: 'Study thermostat '
  description: ''
  trigger:
  - type: temperature
    platform: device
    device_id: d4eaa5ed286ebb61f0e60e64a9103bb8
    entity_id: sensor.ble_temperature_studysensor
    domain: sensor
    below: 17
    for:
      hours: 0
      minutes: 10
      seconds: 0
  - type: humidity
    platform: device
    device_id: d4eaa5ed286ebb61f0e60e64a9103bb8
    entity_id: sensor.ble_humidity_studysensor
    domain: sensor
    above: 19
  condition:
  - condition: numeric_state
    entity_id: sun.sun
    below: -10
  action:
  - service: climate.turn_on
    target:
      entity_id: climate.study_ac
    data: {}
  - service: climate.set_temperature
    data:
      temperature: 19
      target_temp_high: 20
      target_temp_low: 18
      hvac_mode: heat
    target:
      entity_id: climate.study_ac
  - choose:
    - conditions:
      - type: is_temperature
        condition: device
        device_id: d4eaa5ed286ebb61f0e60e64a9103bb8
        entity_id: sensor.ble_temperature_studysensor
        domain: sensor
        below: 17
      sequence:
      - service: climate.turn_on
        data: {}
        target:
          entity_id: climate.study_ac
      - service: climate.set_temperature
        data:
          temperature: 18
          hvac_mode: heat
        target:
          entity_id: climate.study_ac
    - conditions:
      - type: is_temperature
        condition: device
        device_id: d4eaa5ed286ebb61f0e60e64a9103bb8
        entity_id: sensor.ble_temperature_studysensor
        domain: sensor
        above: 19
      - condition: not
        conditions:
        - condition: state
          entity_id: climate.study_ac
          attribute: last_on_operation
          state: 'off'
      sequence:
      - service: climate.set_hvac_mode
        data:
          hvac_mode: 'off'
        target:
          entity_id: climate.study_ac
  mode: single
- id: '1662899680054'
  alias: MasterBedroom Night Setback - Heat/Cool
  description: ''
  trigger:
  - platform: template
    value_template: '{{states(''sensor.masterbed_7989_temperature'')|float > states(''input_number.climate_temperature_home'')
      | float + states(''input_number.climate_range'') | float}}'
    alias: 'Cooler: Sensor > Low Temp Threshold'
    enabled: true
    id: Too Hot ac on
  - platform: template
    value_template: '{{states(''sensor.masterbed_7989_temperature'')|float < states(''input_number.climate_temperature_home'')
      | float - states(''input_number.climate_range'') | float / 2}}'
    enabled: true
    id: Too Cold ac off
    alias: 'Cooler: Sensor < High temp Threshold'
  - platform: template
    value_template: '{{states(''sensor.masterbed_7989_temperature'')|float > states(''input_number.climate_temperature_home'')
      | float + states(''input_number.climate_range'') | float / 2}}'
    alias: 'Heater: Sensor < Low Temp Threshold'
    enabled: true
    id: Too Hot heater off
  - platform: template
    value_template: '{{states(''sensor.masterbed_7989_temperature'')|float < states(''input_number.climate_temperature_home'')
      | float - states(''input_number.climate_range'') | float}}'
    alias: 'Heater: Sensor > High Temp Threshold'
    enabled: true
    id: Too Cold heater on
  - platform: time
    at: input_datetime.bedtime_phil_steph
    id: Bedtime
  condition:
  - condition: state
    entity_id: input_boolean.masterbed_thermostat
    state: 'on'
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.occupancy
      state: Sleeping
    - condition: state
      entity_id: input_select.occupancy
      state: Home
  action:
  - choose:
    - conditions:
      - condition: or
        conditions:
        - type: is_open
          condition: device
          device_id: d5f7f632943251f64c4dedc486906b17
          entity_id: binary_sensor.contact_sensor_2
          domain: binary_sensor
        - condition: state
          entity_id: binary_sensor.contact_sensor_window_and_door_sensor
          state: 'on'
          for:
            hours: 0
            minutes: 5
            seconds: 0
      sequence:
      - service: climate.turn_off
        data: {}
        target:
          entity_id: climate.masterbed_ac
    alias: If doors are open, turn off
    enabled: false
  - choose:
    - conditions:
      - condition: trigger
        id: Too Hot heater off
      sequence:
      - service: climate.set_hvac_mode
        data:
          hvac_mode: 'off'
        target:
          entity_id: climate.masterbed_ac
    - conditions:
      - condition: trigger
        id: Too Cold heater on
      sequence:
      - service: climate.turn_on
        data: {}
        target:
          entity_id: climate.masterbed_ac
        enabled: true
      - service: climate.set_temperature
        data:
          hvac_mode: heat
          temperature: '{{states(''input_number.climate_temperature_home'')|float(0)}}'
          target_temp_high: '{{states(''input_number.climate_temperature_home'') |
            float(0) + states(''input_number.climate_range'') | float(0) / 2}}'
          target_temp_low: '{{states(''input_number.climate_temperature_home'') |
            float(0) - states(''input_number.climate_range'') | float(0) / 2}}'
        target:
          entity_id: climate.masterbed_ac
      - service: climate.set_fan_mode
        data:
          fan_mode: low
        target:
          entity_id: climate.masterbed_ac
    - conditions:
      - condition: trigger
        id: Too Cold ac off
      sequence:
      - service: climate.set_hvac_mode
        data:
          hvac_mode: 'off'
        target:
          entity_id: climate.masterbed_ac
    - conditions:
      - condition: trigger
        id: Too Hot ac on
      sequence:
      - service: climate.turn_on
        data: {}
        target:
          entity_id: climate.masterbed_ac
        enabled: true
      - service: climate.set_fan_mode
        data:
          fan_mode: low
        target:
          entity_id: climate.masterbed_ac
      - service: climate.set_temperature
        data:
          hvac_mode: cool
          temperature: '{{states(''input_number.climate_temperature_home'')|float(0)}}'
          target_temp_high: '{{states(''input_number.climate_temperature_home'') |
            float(0) + states(''input_number.climate_range'') | float(0) / 2}}'
          target_temp_low: '{{states(''input_number.climate_temperature_home'') |
            float(0) - states(''input_number.climate_range'') | float(0) / 2}}'
        target:
          entity_id: climate.masterbed_ac
    - conditions:
      - condition: trigger
        id: Bedtime
        enabled: true
      - condition: template
        value_template: '{{states(''sensor.masterbed_7989_temperature'')|float > states(''input_number.climate_temperature_home'')
          | float + states(''input_number.climate_range'') | float / 2}}'
        alias: Too Hot
      sequence:
      - service: climate.turn_on
        data: {}
        target:
          entity_id: climate.masterbed_ac
        enabled: true
      - service: climate.set_temperature
        data:
          hvac_mode: cool
          temperature: '{{states(''input_number.climate_temperature_home'')|float(0)}}'
          target_temp_high: '{{states(''input_number.climate_temperature_home'') |
            float(0) + states(''input_number.climate_range'') | float(0) / 2}}'
          target_temp_low: '{{states(''input_number.climate_temperature_home'') |
            float(0) - states(''input_number.climate_range'') | float(0) / 2}}'
        target:
          entity_id: climate.masterbed_ac
    - conditions:
      - condition: trigger
        id: Bedtime
        enabled: true
      - condition: template
        value_template: '{{states(''sensor.masterbed_7989_temperature'')|float < states(''input_number.climate_temperature_home'')
          | float - states(''input_number.climate_range'') | float / 2}}'
        alias: Too Cold
      sequence:
      - service: climate.turn_on
        data: {}
        target:
          entity_id: climate.masterbed_ac
        enabled: true
      - service: climate.set_temperature
        data:
          hvac_mode: heat
          temperature: '{{states(''input_number.climate_temperature_home'')|float(0)}}'
          target_temp_high: '{{states(''input_number.climate_temperature_home'') |
            float(0) + states(''input_number.climate_range'') | float(0) / 2}}'
          target_temp_low: '{{states(''input_number.climate_temperature_home'') |
            float(0) - states(''input_number.climate_range'') | float(0) / 2}}'
        target:
          entity_id: climate.masterbed_ac
      - service: climate.set_fan_mode
        data:
          fan_mode: low
        target:
          entity_id: climate.masterbed_ac
    alias: Turn on or Off Masterbed HVAC if too hot or too cold
    default: []
  mode: single
- id: '1664838589308'
  alias: Doors open for a min - turn off ac
  description: ''
  trigger:
  - type: opened
    platform: device
    device_id: a8a15a27fe4c0ce7fa4d3cccacb87e17
    entity_id: binary_sensor.frontdoordoorsensor
    domain: binary_sensor
    for:
      hours: 0
      minutes: 2
      seconds: 0
  - type: opened
    platform: device
    device_id: 1d3b8c35409f5ce6436eafbb92b368dc
    entity_id: binary_sensor.garagedoorsensor
    domain: binary_sensor
    for:
      hours: 0
      minutes: 1
      seconds: 0
  condition:
  - condition: not
    conditions:
    - condition: state
      entity_id: climate.living_room_ac
      attribute: last_on_operation
      state: ''
  action:
  - service: climate.set_hvac_mode
    data:
      hvac_mode: 'off'
    target:
      entity_id: climate.living_room_ac
  mode: single
- id: '1665297755090'
  alias: 'Otto''s thermostat '
  description: ''
  trigger:
  - type: temperature
    platform: device
    device_id: 015e3a46da56611688fcae2c46660b8c
    entity_id: sensor.ble_temperature_ottosroomsensor
    domain: sensor
    below: 16
    for:
      hours: 0
      minutes: 5
      seconds: 0
  - type: temperature
    platform: device
    device_id: 9904a0122b1c1edc01e954d58c97e826
    entity_id: sensor.ble_temperature_masterbedroomsensor
    domain: sensor
    above: 17.5
    for:
      hours: 0
      minutes: 20
      seconds: 0
  condition:
  - condition: state
    state: 'on'
    entity_id: input_boolean.otto_s_thermostat
  action:
  - choose:
    - conditions:
      - type: is_temperature
        condition: device
        device_id: 015e3a46da56611688fcae2c46660b8c
        entity_id: sensor.ble_temperature_ottosroomsensor
        domain: sensor
        above: 17.4
      - condition: state
        entity_id: climate.otto_s_ac
        attribute: last_on_operation
        state: heat
      sequence:
      - service: climate.set_hvac_mode
        data:
          hvac_mode: 'off'
        target:
          entity_id: climate.otto_s_ac
    - conditions:
      - type: is_temperature
        condition: device
        device_id: 015e3a46da56611688fcae2c46660b8c
        entity_id: sensor.ble_temperature_ottosroomsensor
        domain: sensor
        below: 16
      sequence:
      - service: climate.turn_on
        data: {}
        target:
          entity_id: climate.masterbed_ac
      - service: climate.set_temperature
        data:
          hvac_mode: heat
          temperature: 17.5
          target_temp_high: 17.5
          target_temp_low: 16
        target:
          entity_id:
          - climate.otto_s_ac
      - service: climate.set_fan_mode
        data:
          fan_mode: low
        target:
          entity_id: climate.otto_s_ac
    alias: Turn on or Off HVAC if too hot or too cold
  mode: single
- id: '1665308479762'
  alias: Heater at 530am living room if cold
  description: ''
  trigger:
  - platform: time
    at: 05:30:00
  condition:
  - condition: or
    conditions:
    - type: is_temperature
      condition: device
      device_id: ebf0379e33b2ccccd4ee6b6c351f4ce5
      entity_id: sensor.ble_temperature_kitchen_temp_humidity_sensor
      domain: sensor
      below: 16
    - type: is_temperature
      condition: device
      device_id: 4d7546906b50573a9ce56a4a8c04ff90
      entity_id: sensor.livingroom_irblaster_temperature
      domain: sensor
      below: 16
    - condition: or
      conditions:
      - condition: state
        entity_id: input_select.occupancy
        state: Home
      - condition: state
        entity_id: input_select.occupancy
        state: Sleeping
  action:
  - service: climate.turn_on
    data: {}
    target:
      entity_id: climate.living_room_ac
  - service: climate.set_temperature
    data:
      temperature: 18
      target_temp_high: 18
      target_temp_low: 16
      hvac_mode: heat
    target:
      entity_id: climate.living_room_ac
  - service: climate.set_fan_mode
    data:
      fan_mode: low
    target:
      entity_id: climate.living_room_ac
  - choose:
    - conditions:
      - condition: time
        after: 05:30:00
        before: 08:30:00
        weekday:
        - sun
        - mon
        - tue
        - wed
        - thu
        - fri
        - sat
      sequence:
      - service: climate.set_fan_mode
        data:
          fan_mode: Low
        target:
          entity_id: climate.living_room_ac
      - service: climate.set_hvac_mode
        data:
          hvac_mode: heat
        target:
          entity_id: climate.living_room_ac
      - service: climate.set_temperature
        data:
          temperature: 18
          target_temp_high: 22
          target_temp_low: 18
          hvac_mode: heat
        target:
          entity_id: climate.living_room_ac
  mode: single
- id: '1669679693928'
  alias: Party flash
  description: ''
  trigger:
  - platform: device
    device_id: 3c11ea2cdc99cd0aaef7e25d6dc7d5a8
    domain: homekit_controller
    type: button1
    subtype: long_press
  condition: []
  action:
  - service: scene.turn_on
    target:
      entity_id: scene.party_light
    metadata: {}
  mode: single
- id: '1670355699319'
  alias: Xmas lights on at 7am
  description: ''
  trigger:
  - platform: time
    at: 06:30:00
  condition: []
  action:
  - type: turn_on
    device_id: 399b754fdf1cb07ed6c2bfcf22f86dce
    entity_id: light.study_light
    domain: light
  mode: single
- id: '1672988382648'
  alias: Laundry
  description: ''
  trigger:
  - type: voltage
    platform: device
    device_id: f216500e7f05587e14e6db5e6f29248d
    entity_id: sensor.smart_plug_voltage
    domain: sensor
    below: 100
    for:
      hours: 0
      minutes: 15
      seconds: 0
  condition: []
  action:
  - service: notify.mobile_app_samsung_galaxy_s22_ultra
    data:
      message: Washing or dryer are done
  - service: notify.mobile_app_slvdh
    data:
      message: Washing or dryer are done
  mode: single
- id: '1673655293444'
  alias: Heat Kids Rooms at 530
  description: Doors closed, temp must be too cold
  trigger:
  - platform: time
    at: '17:30:00'
  condition:
  - condition: or
    conditions:
    - type: is_temperature
      condition: device
      device_id: 015e3a46da56611688fcae2c46660b8c
      entity_id: sensor.ble_temperature_ottosroomsensor
      domain: sensor
      above: 22
      below: 18
    - type: is_temperature
      condition: device
      device_id: d4eaa5ed286ebb61f0e60e64a9103bb8
      entity_id: sensor.ble_temperature_studysensor
      domain: sensor
      above: 22
      below: 18
    - type: is_temperature
      condition: device
      device_id: d16ddd0fb889addc551414cc0cb19749
      entity_id: sensor.openweathermap_temperature
      domain: sensor
      below: 16
      above: 20
  action:
  - choose:
    - conditions:
      - condition: and
        conditions:
        - condition: state
          entity_id: binary_sensor.contact_sensor_window_and_door_sensor_3
          state: 'off'
        - type: is_temperature
          condition: device
          device_id: 015e3a46da56611688fcae2c46660b8c
          entity_id: sensor.ble_temperature_ottosroomsensor
          domain: sensor
          below: 18
      sequence:
      - service: climate.turn_on
        data: {}
        target:
          entity_id: climate.otto_s_ac
      - service: climate.set_temperature
        data:
          target_temp_high: 20
          target_temp_low: 18
          hvac_mode: heat
          temperature: 18
        target:
          entity_id: climate.otto_s_ac
        alias: Climate heat Otto's room
    - conditions:
      - condition: and
        conditions:
        - condition: state
          entity_id: binary_sensor.contact_sensor_window_and_door_sensor_2
          state: 'off'
        - type: is_temperature
          condition: device
          device_id: d4eaa5ed286ebb61f0e60e64a9103bb8
          entity_id: sensor.ble_temperature_studysensor
          domain: sensor
          below: 18
      sequence:
      - service: climate.turn_on
        data: {}
        target:
          entity_id: climate.study_ac
      - service: climate.set_temperature
        data:
          temperature: 20
          target_temp_high: 22
          target_temp_low: 19
          hvac_mode: heat
        target:
          entity_id: climate.study_ac
    default: []
  mode: single
- id: '1673864135673'
  alias: Masterbedroom Fan Temperature High
  description: ''
  trigger:
  - type: temperature
    platform: device
    device_id: 9904a0122b1c1edc01e954d58c97e826
    entity_id: sensor.ble_temperature_masterbed_temp_humidity_sensor
    domain: sensor
    above: 20
    for:
      hours: 0
      minutes: 20
      seconds: 0
  condition:
  - condition: state
    entity_id: binary_sensor.masterbed_blind_temperature
    attribute: upper
    state: 'true'
  - condition: device
    type: is_on
    device_id: 399b754fdf1cb07ed6c2bfcf22f86dce
    entity_id: switch.study_switch_socket_1
    domain: switch
  - condition: or
    conditions:
    - condition: device
      device_id: adb847a02c9f8c21ca1085d71113c30e
      domain: device_tracker
      entity_id: device_tracker.study
      type: is_home
    - condition: device
      device_id: d753b1a838b7ff71cd1389a84177a168
      domain: device_tracker
      entity_id: device_tracker.study_2
      type: is_home
    - condition: device
      device_id: 77cd070867140b0b6348bc0bb59fada9
      domain: device_tracker
      entity_id: device_tracker.aolt006498
      type: is_home
  - type: is_value
    condition: device
    device_id: d16ddd0fb889addc551414cc0cb19749
    entity_id: sensor.openweathermap_cloud_coverage
    domain: sensor
    below: 20
  action:
  - service: script.roller_blinds_down
    data: {}
  mode: single
- id: '1677490997108'
  alias: Low battery level detection & notification for all battery sensors
  description: ''
  use_blueprint:
    path: sbyx/low-battery-level-detection-notification-for-all-battery-sensors.yaml
    input:
      actions:
      - device_id: c054264b79e6739a057236f3a3c512b4
        domain: mobile_app
        type: notify
        message: '{{sensors}}'
        title: Low battery warning
      - device_id: 58e2eb1fec0eb5ec9ce450433d074fcf
        domain: mobile_app
        type: notify
        message: '{{sensors}}'
        title: Low battery warning
      threshold: 25
      exclude:
        entity_id: []
        device_id:
        - 58e2eb1fec0eb5ec9ce450433d074fcf
        - c054264b79e6739a057236f3a3c512b4
- id: '1679951680731'
  alias: Workday computer desk power on
  description: ''
  trigger:
  - platform: time
    at: 07:45:00
  - platform: calendar
    event: start
    offset: 0:0:0
    entity_id: calendar.working_from_home
  condition: []
  action:
  - type: turn_on
    device_id: 399b754fdf1cb07ed6c2bfcf22f86dce
    entity_id: switch.study_switch_socket_1
    domain: switch
  mode: single
- id: '1679951733801'
  alias: Workday computer desk off
  description: ''
  trigger:
  - platform: time
    at: '22:00:00'
  - platform: calendar
    event: end
    offset: 0:0:0
    entity_id: calendar.working_from_home
  condition: []
  action:
  - type: turn_off
    device_id: 399b754fdf1cb07ed6c2bfcf22f86dce
    entity_id: switch.study_switch_socket_1
    domain: switch
  mode: single
- id: '1680428953385'
  alias: 'Masterbed Night schedule '
  description: ''
  use_blueprint:
    path: KartoffelToby/night_mode.yaml
    input:
      night_times_schedule: schedule.night_mode_heaters
      thermostat_target:
        entity_id: climate.masterbed_room
      night_temp: 16
- id: '1681256924026'
  alias: Heater on master if working
  description: ''
  trigger:
  - type: temperature
    platform: device
    device_id: 9904a0122b1c1edc01e954d58c97e826
    entity_id: sensor.ble_temperature_masterbedroomsensor
    domain: sensor
    below: 18
    for:
      hours: 0
      minutes: 2
      seconds: 0
  condition:
  - type: is_temperature
    condition: device
    device_id: d16ddd0fb889addc551414cc0cb19749
    entity_id: sensor.openweathermap_feels_like_temperature
    domain: sensor
    below: 12
  - condition: device
    type: is_on
    device_id: 399b754fdf1cb07ed6c2bfcf22f86dce
    entity_id: switch.study_switch_socket_1
    domain: switch
  - condition: or
    conditions:
    - condition: device
      device_id: c054264b79e6739a057236f3a3c512b4
      domain: device_tracker
      entity_id: device_tracker.sm_s908e
      type: is_home
    - condition: device
      device_id: 58e2eb1fec0eb5ec9ce450433d074fcf
      domain: device_tracker
      entity_id: device_tracker.slvdh_2
      type: is_home
  action:
  - service: climate.turn_on
    data: {}
    target:
      entity_id: climate.masterbed_ac
  - service: climate.set_temperature
    data:
      temperature: 20
      target_temp_high: 21
      target_temp_low: 18
      hvac_mode: heat
    target:
      entity_id: climate.masterbed_ac
  mode: single
- id: '1681337163617'
  alias: Occupancy Away
  description: If nobody home
  trigger:
  - platform: numeric_state
    entity_id: zone.home
    below: 1
  condition:
  - condition: and
    conditions:
    - condition: device
      device_id: c054264b79e6739a057236f3a3c512b4
      domain: device_tracker
      entity_id: device_tracker.sm_s908e
      type: is_not_home
    - condition: device
      device_id: 58e2eb1fec0eb5ec9ce450433d074fcf
      domain: device_tracker
      entity_id: device_tracker.slvdh_2
      type: is_not_home
  action:
  - service: input_select.select_option
    data:
      option: Away
    target:
      entity_id: input_select.occupancy
  mode: single
- id: '1681548980319'
  alias: Occupancy Home
  description: On arrival home
  trigger:
  - platform: numeric_state
    entity_id: zone.home
    above: 0
  - platform: device
    device_id: cf718058386534ee76f35b14ff034283
    domain: device_tracker
    entity_id: device_tracker.slvdh
    type: enters
    zone: zone.home
    enabled: false
  - platform: device
    device_id: 42f447adc0208ab56145b98eee4e8cbc
    domain: device_tracker
    entity_id: device_tracker.phils_phone
    type: enters
    zone: zone.home
    enabled: false
  condition:
  - condition: device
    device_id: c054264b79e6739a057236f3a3c512b4
    domain: device_tracker
    entity_id: device_tracker.sm_s908e
    type: is_not_home
    enabled: false
  - condition: device
    device_id: 58e2eb1fec0eb5ec9ce450433d074fcf
    domain: device_tracker
    entity_id: device_tracker.slvdh_2
    type: is_not_home
    enabled: false
  action:
  - service: input_select.select_option
    data:
      option: Home
    target:
      entity_id: input_select.occupancy
  mode: single
- id: '1681557115756'
  alias: Arm Alarm Home/Away
  description: ''
  trigger:
  - platform: state
    entity_id:
    - input_select.occupancy
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_select.occupancy
        state: Away
      sequence:
      - device_id: d0246dd7b63468505017ec29f63e3d86
        domain: alarm_control_panel
        entity_id: alarm_control_panel.alarmo
        type: arm_away
    - conditions:
      - condition: state
        entity_id: input_select.occupancy
        state: Home
      sequence:
      - device_id: d0246dd7b63468505017ec29f63e3d86
        domain: alarm_control_panel
        entity_id: alarm_control_panel.alarmo
        type: disarm
    - conditions:
      - condition: state
        entity_id: input_select.occupancy
        state: Sleeping
      sequence:
      - device_id: d0246dd7b63468505017ec29f63e3d86
        domain: alarm_control_panel
        entity_id: alarm_control_panel.alarmo
        type: arm_night
  mode: single
- id: '1681617191471'
  alias: Theme - Set Default Theme
  description: ''
  trigger:
  - platform: homeassistant
    event: start
  condition: []
  action:
  - service: frontend.set_theme
    data:
      name: waves
  mode: single
- id: '1681731859692'
  alias: Arm Night Alarm
  description: ''
  trigger:
  - platform: time
    at: '21:00:00'
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_select.occupancy
        state: Away
      sequence:
      - wait_for_trigger:
        - platform: state
          entity_id:
          - input_select.occupancy
          from: Away
          to: Home
          for:
            hours: 4
            minutes: 0
            seconds: 0
        continue_on_timeout: false
      - device_id: d0246dd7b63468505017ec29f63e3d86
        domain: alarm_control_panel
        entity_id: alarm_control_panel.alarmo
        type: arm_night
    - conditions:
      - condition: state
        entity_id: input_select.occupancy
        state: Home
      sequence:
      - device_id: d0246dd7b63468505017ec29f63e3d86
        domain: alarm_control_panel
        entity_id: alarm_control_panel.alarmo
        type: arm_night
    - conditions:
      - condition: state
        entity_id: input_select.occupancy
        state: Holiday
      sequence:
      - stop: Not required. Alarm already set.
    - conditions:
      - condition: state
        entity_id: input_select.occupancy
        state: Sleeping
      sequence:
      - device_id: d0246dd7b63468505017ec29f63e3d86
        domain: alarm_control_panel
        entity_id: alarm_control_panel.alarmo
        type: arm_night
    default:
    - device_id: d0246dd7b63468505017ec29f63e3d86
      domain: alarm_control_panel
      entity_id: alarm_control_panel.alarmo
      type: arm_night
  - device_id: c054264b79e6739a057236f3a3c512b4
    domain: mobile_app
    type: notify
    message: ''
  - service: notify.mobile_app_samsung_galaxy_s22_ultra
    data:
      message: Home has detected youre not at home. Are you coming home?
      title: 'Action: are you coming home tonight?'
  mode: single
- id: '1681764715451'
  alias: Turn off alarm in morning
  description: ''
  trigger:
  - platform: time
    at: 05:00:00
  condition:
  - condition: state
    entity_id: input_select.occupancy
    state: Sleeping
  action:
  - device_id: d0246dd7b63468505017ec29f63e3d86
    domain: alarm_control_panel
    entity_id: alarm_control_panel.alarmo
    type: disarm
  mode: single
- id: '1681934510599'
  alias: TEST - Actionable Notifications
  description: ''
  trigger: []
  condition: []
  action:
  - alias: Set up variables for the actions
    variables:
      action_open: '{{ ''OPEN_'' ~ context.id }}'
      action_close: '{{ ''CLOSE_'' ~ context.id }}'
  - alias: Ask to close or open the blinds
    service: notify.mobile_app_Samsung_galaxy_s22_ultra
    data:
      message: The blinds are half-open. Do you want to adjust this?
      data:
        actions:
        - action: '{{ action_open }}'
          title: Open
        - action: '{{ action_close }}'
          title: Close
  - alias: Wait for a response
    wait_for_trigger:
    - platform: event
      event_type: mobile_app_notification_action
      event_data:
        action: '{{ action_open }}'
    - platform: event
      event_type: mobile_app_notification_action
      event_data:
        action: '{{ action_close }}'
  - alias: Perform the action
    choose:
    - conditions: '{{ wait.trigger.event.data.action == action_open }}'
      sequence:
      - service: cover.open_cover
        target:
          entity_id: cover.some_cover
    - conditions: '{{ wait.trigger.event.data.action == action_close }}'
      sequence:
      - service: cover.close_cover
        target:
          entity_id: cover.some_cover
  mode: single
- id: '1682076507058'
  alias: Henry's Night Setback - Heat/Cool
  description: ''
  trigger:
  - platform: template
    value_template: '{{states(''sensor.henrys_room_temp_humidity_sensor_temperature'')
      |float > states(''input_number.climate_temperature_home'') | float + states(''input_number.climate_range'')
      | float + states(''input_number.climate_henry_offset'') | float}}'
    alias: 'Cooler: Sensor > Low Temp Threshold'
    enabled: true
    id: Too Hot ac on
  - platform: template
    value_template: '{{states(''sensor.henrys_room_temp_humidity_sensor_temperature'')
      |float < states(''input_number.climate_temperature_home'') | float - states(''input_number.climate_range'')
      | float / 2 + states(''input_number.climate_henry_offset'') | float}}'
    enabled: true
    id: Too Cold ac off
    alias: 'Cooler: Sensor < High temp Threshold'
  - platform: template
    value_template: '{{states(''sensor.henrys_room_temp_humidity_sensor_temperature'')
      |float > states(''input_number.climate_temperature_home'') | float + states(''input_number.climate_range'')
      | float / 2 + states(''input_number.climate_henry_offset'') | float}}'
    alias: 'Heater: Sensor < Low Temp Threshold'
    enabled: true
    id: Too Hot heater off
  - platform: template
    value_template: '{{states(''sensor.henrys_room_temp_humidity_sensor_temperature'')
      |float < states(''input_number.climate_temperature_home'') | float + states(''input_number.climate_range'')
      | float + states(''input_number.climate_henry_offset'') | float}}'
    alias: 'Heater: Sensor > High Temp Threshold'
    enabled: true
    id: Too Cold heater on
  - platform: time
    at: input_datetime.bedtime_henry
    id: Bedtime
  condition:
  - condition: state
    entity_id: input_boolean.henry_s_room_a_c_sleep_night_setback
    state: 'on'
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.occupancy
      state: Sleeping
    - condition: state
      entity_id: input_select.occupancy
      state: Home
  action:
  - choose:
    - conditions:
      - condition: or
        conditions:
        - type: is_open
          condition: device
          device_id: d5f7f632943251f64c4dedc486906b17
          entity_id: binary_sensor.contact_sensor_2
          domain: binary_sensor
        - condition: state
          entity_id: binary_sensor.contact_sensor_window_and_door_sensor
          state: 'on'
          for:
            hours: 0
            minutes: 5
            seconds: 0
      sequence:
      - service: climate.turn_off
        data: {}
        target:
          entity_id: climate.masterbed_ac
    alias: If doors are open, turn off
    enabled: false
  - choose:
    - conditions:
      - condition: trigger
        id: Too Hot heater off
      sequence:
      - service: climate.set_hvac_mode
        data:
          hvac_mode: 'off'
        target:
          entity_id: climate.masterbed_ac
    - conditions:
      - condition: trigger
        id: Too Cold heater on
      sequence:
      - service: climate.turn_on
        data: {}
        target:
          entity_id: climate.masterbed_ac
        enabled: true
      - service: climate.set_temperature
        data:
          hvac_mode: heat
          temperature: '{{states(''input_number.climate_temperature_home'')|float
            +  states(''input_number.climate_henry_offset'') | float }}'
          target_temp_high: '{{states(''input_number.climate_temperature_home'') |
            float + states(''input_number.climate_henry_offset'') | float +  states(''input_number.climate_range'')
            | float(0)}}'
          target_temp_low: '{{states(''input_number.climate_temperature_home'') |
            float +  states(''input_number.climate_henry_offset'') | float -  states(''input_number.climate_range'')
            | float(0)}}'
        target:
          entity_id: climate.masterbed_ac
      - service: climate.set_fan_mode
        data:
          fan_mode: low
        target:
          entity_id: climate.masterbed_ac
    - conditions:
      - condition: trigger
        id: Too Cold ac off
      sequence:
      - service: climate.set_hvac_mode
        data:
          hvac_mode: 'off'
        target:
          entity_id: climate.masterbed_ac
    - conditions:
      - condition: trigger
        id: Too Hot ac on
      sequence:
      - service: climate.turn_on
        data: {}
        target:
          entity_id: climate.masterbed_ac
        enabled: true
      - service: climate.set_fan_mode
        data:
          fan_mode: low
        target:
          entity_id: climate.masterbed_ac
      - service: climate.set_temperature
        data:
          hvac_mode: cool
          temperature: '{{states(''input_number.climate_temperature_home'')|float(0)}}'
          target_temp_high: '{{states(''input_number.climate_temperature_home'') |
            float(0) + states(''input_number.climate_range'') | float(0) / 2}}'
          target_temp_low: '{{states(''input_number.climate_temperature_home'') |
            float(0) - states(''input_number.climate_range'') | float(0) / 2}}'
        target:
          entity_id: climate.masterbed_ac
    - conditions:
      - condition: trigger
        id: Bedtime
        enabled: true
      - condition: template
        value_template: '{{states(''sensor.masterbed_7989_temperature'')|float > states(''input_number.climate_temperature_home'')
          | float + states(''input_number.climate_range'') | float / 2}}'
        alias: Too Hot
      sequence:
      - service: climate.turn_on
        data: {}
        target:
          entity_id: climate.masterbed_ac
        enabled: true
      - service: climate.set_temperature
        data:
          hvac_mode: cool
          temperature: '{{states(''input_number.climate_temperature_home'')|float(0)}}'
          target_temp_high: '{{states(''input_number.climate_temperature_home'') |
            float(0) + states(''input_number.climate_range'') | float(0) / 2}}'
          target_temp_low: '{{states(''input_number.climate_temperature_home'') |
            float(0) - states(''input_number.climate_range'') | float(0) / 2}}'
        target:
          entity_id: climate.masterbed_ac
    - conditions:
      - condition: trigger
        id: Bedtime
        enabled: true
      - condition: template
        value_template: '{{states(''sensor.masterbed_7989_temperature'')|float < states(''input_number.climate_temperature_home'')
          | float - states(''input_number.climate_range'') | float / 2}}'
        alias: Too Cold
      sequence:
      - service: climate.turn_on
        data: {}
        target:
          entity_id: climate.masterbed_ac
        enabled: true
      - service: climate.set_temperature
        data:
          hvac_mode: heat
          temperature: '{{states(''input_number.climate_temperature_home'')|float(0)}}'
          target_temp_high: '{{states(''input_number.climate_temperature_home'') |
            float(0) + states(''input_number.climate_range'') | float(0) / 2}}'
          target_temp_low: '{{states(''input_number.climate_temperature_home'') |
            float(0) - states(''input_number.climate_range'') | float(0) / 2}}'
        target:
          entity_id: climate.masterbed_ac
      - service: climate.set_fan_mode
        data:
          fan_mode: low
        target:
          entity_id: climate.masterbed_ac
    alias: Turn on or Off Masterbed HVAC if too hot or too cold
    default: []
  mode: single
- id: '1682307816446'
  alias: Boys room too hot
  description: ''
  trigger:
  - type: temperature
    platform: device
    device_id: b537f27e291c84976b0e98d50753fa53
    entity_id: sensor.a4_c1_38_f1_20_5c_205c_temperature
    domain: sensor
    above: 21
  - type: temperature
    platform: device
    device_id: b537f27e291c84976b0e98d50753fa53
    entity_id: sensor.a4_c1_38_f1_20_5c_205c_temperature
    domain: sensor
    below: 18
  - type: humidity
    platform: device
    device_id: 965f33a45d886ffdb7f7fe01d1ee78bd
    entity_id: sensor.henrys_room_temp_humidity_sensor_humidity
    domain: sensor
    above: 21
  - type: humidity
    platform: device
    device_id: 965f33a45d886ffdb7f7fe01d1ee78bd
    entity_id: sensor.henrys_room_temp_humidity_sensor_humidity
    domain: sensor
    below: 18
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: input_select.occupancy
      state: Home
    - condition: state
      entity_id: input_select.occupancy
      state: Sleeping
  action:
  - service: notify.mobile_app_samsung_galaxy_s22_ultra
    data:
      title: Otto or Henrys room is too hot
  mode: single
- id: '1682307829149'
  description: ''
  trigger: []
  condition: []
  action: []
  mode: single
